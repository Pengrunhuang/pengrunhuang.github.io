\documentclass{report}
\usepackage{amsmath,amssymb,amsthm,textcomp,gensymb}
\usepackage{mathtools}
\renewcommand{\qedsymbol}{$\blacksquare$}

\setlength{\topmargin}{0.5in}
\usepackage[margin=4cm]{geometry}
\usepackage{enumerate}
\renewcommand{\labelenumi}{(\alph{enumi})}
\renewcommand{\labelenumii}{(\arabic{enumii})}

\usepackage{setspace}
\onehalfspacing
\usepackage{parskip}
\setlength{\parskip}{0.5em}
\usepackage[T1]{fontenc}
\usepackage{palatino}

% useful characters/operators
\newcommand{\R}{\mathbb{R}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\matP}{\mathbb{P}}
\newcommand{\matS}{\mathbb{S}}
\newcommand{\matH}{\mathbb{H}}
\newcommand{\matT}{\mathbb{T}}
\newcommand{\st}{\ s.t.\ }
\newcommand{\ie}{\ i.e.\ }
\newcommand{\eg}{\ e.g.\ }
\newcommand{\cA}{\mathcal{A}}
\newcommand{\cB}{\mathcal{B}}
\newcommand{\cC}{\mathcal{C}}
\newcommand{\cE}{\mathcal{E}}
\newcommand{\cL}{\mathcal{L}}
\newcommand{\cM}{\mathcal{M}}
\newcommand{\cF}{\mathcal{F}}
\newcommand{\cR}{\mathcal{R}}
\def \diam {\operatorname{diam}}
\def \Hom {\operatorname{Hom}}
\def \id {\operatorname{id}}
\def \tr {\operatorname{tr}}
\def \dist {\operatorname{dist}}
\def \intr {\operatorname{int}}
\def \sgn {\operatorname{sgn}}
\def \im {\operatorname{Im}}
\def \re {\operatorname{Re}}
\def \curl {\operatorname{curl}}
\def \divg {\operatorname{div}}
\def \GL {\operatorname{GL}}
\def \supp {\operatorname{supp}}
\newcommand{\pdr}[2]{\dfrac{\partial #1}{\partial #2}}
\newcommand{\dr}[2]{\dfrac{\text{d} #1}{\text{d} #2}}
\newcommand{\df}{\ \mathrm{d}}
\newcommand{\inner}[2]{\left\langle #1, #2\right\rangle}
\newcommand{\gen}[1]{\left\langle #1 \right\rangle}
\newcommand{\norm}[1]{\left\| #1 \right\|}

% arrows and :=, =:
\makeatletter
\providecommand*{\twoheadrightarrowfill@}{%
  \arrowfill@\relbar\relbar\twoheadrightarrow
}
\providecommand*{\twoheadleftarrowfill@}{%
  \arrowfill@\twoheadleftarrow\relbar\relbar
}
\providecommand*{\xtwoheadrightarrow}[2][]{%
  \ext@arrow 0579\twoheadrightarrowfill@{#1}{#2}%
}
\providecommand*{\xtwoheadleftarrow}[2][]{%
  \ext@arrow 5097\twoheadleftarrowfill@{#1}{#2}%
}
\makeatother

\newcommand{\defeq}{\vcentcolon=}
\newcommand{\eqdef}{=\mathrel{\mathop:}}

% integral for measure theory
\newcommand{\lowerint}{\underline{\int_{\R^d}}}
\newcommand{\upperint}{\overline{\int_{\R^d}}}
\newcommand{\lint}[1]{\underline{\int_{\R^d}} #1 (x)dx}
\newcommand{\uint}[1]{\overline{\int_{\R^d}} #1 (x)dx}
\newcommand{\sint}[1]{\simp{\int_{\R^d} #1 (x)dx}}
\newcommand{\lesint}[1]{\int_{\R^d} #1 (x)dx}

% note taking
\newcommand{\fancyem}[1]{\underline{\textsc{#1}}}

% theorem style
\newtheorem{theorem}{Theorem}[chapter]
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{conjecture}[theorem]{Conjecture}
\newtheorem{proposition}[theorem]{Proposition}

\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{example}[theorem]{Example}
\theoremstyle{remark}
\newtheorem*{remark}{Remark}

% for clearer reference
\usepackage{hyperref}
\newcommand{\corollaryautorefname}{Corollary}
\newcommand{\lemmaautorefname}{Lemma}
\newcommand{\definitionautorefname}{Definition}
\newcommand{\exampleautorefname}{Example}
\newcommand{\conjectureautorefname}{Conjecture}
\renewcommand{\subsectionautorefname}{Section}
\usepackage{cleveref}

% other styling
\usepackage{fancyvrb, fancyhdr}
\usepackage{tikz}
\usepackage{tcolorbox}

\usepackage{tikz-cd}

\pagestyle{fancy}
\fancyhead[LO,L]{\leftmark}
\fancyhead[RO,R]{Yiwei Fu}
\fancyfoot[CO,C]{\thepage}
\renewcommand{\sectionmark}[1]{\markboth{#1}{#1}}

\newcommand{\fnl}{\parbox[t]{0\linewidth}{}}
\newcommand*\ttlmath[2]{\texorpdfstring{$\boldsymbol{#1}$}{#2}}

\usepackage{epigraph}

% \epigraphsize{\small}% Default
\setlength\epigraphwidth{8cm}
\setlength\epigraphrule{0pt}

\usepackage{etoolbox}

\makeatletter
\patchcmd{\epigraph}{\@epitext{#1}}{\itshape\@epitext{#1}}{}{}
\makeatother

\begin{document}
\pagenumbering{gobble}
\clearpage
\thispagestyle{empty}
% \renewcommand{\ref}[1]{\autoref{#1}}
\title{Notes for Math 597 -- Real Analysis}
\author{Yiwei Fu}
\date{WN 2022}
\maketitle

\tableofcontents
Office hour is Mon 12:30 - 1:30, Tue 12:30 - 1:30 in person EH 5838, Th 1 - 2 online.

\clearpage
\pagenumbering{arabic}
\chapter{Abstract Measure}

\section{\ttlmath{\sigma}{sigma}-Algebra}
\begin{definition}
Let $X$ be a set. A collection $\mathcal{M}$ of subsets of $X$ is called a $\sigma$-algebra on $X$ if
\begin{itemize}
\item
	$\emptyset \in \mathcal{M}.$
\item
	$\mathcal{M}$ is closed under \emph{complements}: $E \in \mathcal{M} \implies E^c \in \mathcal{M}.$
\item
	$\mathcal{M}$ is closed under \emph{countable unions}: $E_1, E_2, \ldots \in \mathcal{M} \implies \bigcup_{i=1}^\infty E_i \in \mathcal{M}.$
\end{itemize}
\end{definition}
\fancyem{Simple properties:}
\begin{itemize}
\item
	$X = \emptyset^c \in \mathcal{M}.$
\item
	$\bigcap_{i=1}^\infty E_i = \left(\bigcup_{i=1}^n E_i^c\right)^c \in \mathcal{M}.$ It is closed under countable intersections.
\item
	$\bigcup_{i=1}^N E_i = E_i \cup \ldots \cup E_n \cup \emptyset \cup \ldots.$ It is closed under finite unions (similarly, intersections).
sigma\item
	$E \setminus F = E \cap F^c \in \mathcal{M}, E \triangle F = (E \cap F^c) \cup (F \cap E^c) \in \mathcal{M}.$
\end{itemize}

\begin{example}
\begin{enumerate}[(a)]
\item $\mathcal{A} = \mathcal{P}(X)$ power algebra.
\item $\mathcal{A} = \{\emptyset, X\}$ trivial algebra.
\item Let $B \subset X, B \neq \emptyset, B \neq X. \mathcal{A} = \{\emptyset, B, B^c, X\}.$
\end{enumerate}
\end{example}

\begin{lemma}(An intersection of $\sigma$-algebras is a $\sigma$-algebra)
Let $\mathcal{A}_\alpha, \alpha \in I,$ be a family a $\sigma$-algebras of $X$. Then $\bigcap_{\alpha \in I} A_\alpha$ is a $\sigma$-algebra. ($I$ can be uncountable.)
\end{lemma}
\begin{proof}
DIY
\end{proof}

\begin{definition}
For $\mathcal{E} \subset \mathcal{P}(X)$ (not necessarily a $\sigma$-algebra), let $\langle \mathcal{E}\rangle$ be the intersection of all $\sigma$-algebras on $X$ that contains $\mathcal{E}.$ Call it the $\sigma$-algebra generated by $\mathcal{E}.$
\end{definition}
\begin{itemize}
\item $\langle \mathcal{E}\rangle$ is the \emph{smallest} $\sigma$-algebra containing $\mathcal{E}$ and is \emph{unique}.
\item $\{\emptyset, B, B^c, X\} = \langle \{B\} \rangle = \langle \{B^c\}\rangle = \langle \{\emptyset, B\}\rangle.$
\end{itemize}

The above definition gives us (potentially) lots of examples of $\sigma$-algebra on a set $X$

\begin{lemma}\label{le:alg}
\begin{enumerate}[(a)]
\item
	Suppose $\mathcal{E} \subset \mathcal{P}(X), \mathcal{A}$ is a $\sigma$-algebra on $X$. $\mathcal{E} \in \mathcal{A} \implies \langle\mathcal{E}\rangle \in \mathcal{A}.$
\item
	$E \subset F \subset \mathcal{P}(X) \implies \langle \mathcal{E} \rangle \subset \langle\mathcal{F}\rangle.$
\end{enumerate}
\end{lemma}
\begin{proof}

\end{proof}

\begin{definition}
For a topological space $X$, \emph{the Borel $\sigma$-algebra} $\mathcal{B}(X)$ is the $\sigma$-algebra generated by the collection of open sets.
\end{definition}

\begin{example}($X = \R$)
$\mathcal{B}(\R)$ contains the following collections:
\begin{align*}
	\mathcal{E}_1 = \{(a, b) \mid a < b\},& \quad \mathcal{E}_2 = \{[a, b] \mid a < b\},\\
	\mathcal{E}_3 = \{(a, b] \mid a < b\},& \quad \mathcal{E}_4 = \{[a, b) \mid a < b\},\\
	\mathcal{E}_5 = \{(a, \infty) \mid a \in \R\},& \quad \mathcal{E}_6 = \{[a, \infty) \mid a \in \R \},\\
	\mathcal{E}_7 = \{(-\infty, a) \mid a \in \R\},& \quad \mathcal{E}_8 = \{(-\infty, a] \mid a < b\}.
\end{align*}

\end{example}

\begin{proposition}
$\mathcal{B}(\R) = \langle\mathcal{E}_i\rangle$ for each $i = 1, \ldots, 8$. 
\end{proposition}
\begin{proof}
Use \ref{le:alg}.
\end{proof}

\begin{definition}
$(X, \mathcal{A})$ is called a measurable space.
\end{definition}


\section{Measures}
\begin{definition}
A measure on $(X, \mathcal{A})$ is a function $\mu: \mathcal{A} \to [0, \infty] \st$
\begin{enumerate}
\item $\mu(\emptyset) = 0$
\item (countable additive) For $A_1, A_2, \ldots \in \mathcal{A}$ disjoint we have
\[
\mu\left(\bigcup_1^\infty A_i \right) = \sum_{i=1}^\infty \mu(A_i).
\]
\end{enumerate}
$(X,  \mathcal{A}, \mu)$ is then called a measure space.
\end{definition}

\begin{example}
\begin{enumerate}
\item For any $(X, \mathcal{A}), \mu(A) = \#A$ counting measure.
\item For any $(X, \mathcal{A}),$ let $x_0 \in X.$ The Dirac measure at $x_0$ is
\[
\mu(A) = \begin{cases}
1 & x_0 \in A, \\
0 & x_0 \notin A.
\end{cases}
\]
\item For $(\N, \mathcal{P}(\N)),$ let $a_1, a_2, \ldots \in [0, \infty).$ $\mu(A) = \sum_{i \in A} a_i$ is a measure.
\end{enumerate}
\end{example}

$(X,  \mathcal{A})$ measurable space

$(X,  \mathcal{A}, \mu)$ measure space

$\mu: \mathcal{A} \to [0, \infty] \st \mu(\emptyset) = 0, $ countable additivity.

\fancyem{Note}: $A, B \in \mathcal{A}, A \subset B, $ then $ \mu(B \setminus A) + \mu(A) = \mu(B) \implies \mu(B \setminus A) = \mu(B) - \mu(A)$ if $\mu(A) < \infty.$

\setcounter{theorem}{12}
\begin{theorem}
Suppose $(X,  \mathcal{A}, \mu)$ a measure space. Then
\begin{enumerate}
\item(monotonicity)
\[A, B \in \mathcal{A}, A \subset B \implies \mu(A) \leq \mu(B).\]
\item(countable subadditivity)
	\[A_1, A_2, \ldots, \in \mathcal{A}, \implies \mu\left(\bigcup_i^\infty A_i\right) \leq \sum_i^\infty \mu(A_i).\]
\item(continuity from below/(MCT) from sets)
	\[A_1, A_2, \ldots \in \mathcal{A}, A_1 \subset A_2 \subset A_3 \subset \ldots \implies \mu\left(\bigcup_i^\infty A_i\right) = \lim_{n \to \infty} \mu(A_n).\]
\item(continuity from above)
	\[A_1, A_2, \ldots \in \mathcal{A}, A_1 \supset A_2 \supset A_3 \supset \ldots, \mu(A_1) < \infty \implies \mu\left(\bigcap_i^\infty A_i\right) = \lim_{n \to \infty} \mu(A_n).\]
\end{enumerate}
\end{theorem}
\begin{proof}
    (a), (b), DIY.

    For (c), let $B_1 = A_1, B_i = A_i \setminus A_{i-1}, i \geq 2. B_i \in \mathcal{A}$ and are disjoint.
    \begin{align*}
        & \bigcup_i^\infty A_i = \bigcup_i^\infty B_i \\
        \implies\ & \mu\left(\bigcup_i^\infty A_i\right) = \mu\left(\bigcup_i^\infty B_i\right) = \sum_{i}^\infty \mu(B_i) = \lim_{n \to \infty} \sum_{i}^n \mu(B_i) = \lim_{n \to \infty} \mu(A_n).
    \end{align*}


For (d), let $E_i = A_1 \setminus A_i.$ Hence $E_i \in \mathcal{A}, E_1 \subset E_2 \subset \ldots$
We have
\[
\bigcup_i^\infty E_i = \bigcup_i^\infty (A_1 \setminus A_i) = A_1 \setminus \left(\bigcap_1^\infty A_i\right) \implies \bigcap_1^\infty A_i = A_1 \setminus \left(\bigcup_1^\infty E_i\right).
\]
Hence
\[
\mu\left(\bigcap_1^\infty A_i \right) = \mu(A_1) - \mu\left(\bigcup_1^\infty E_i\right) = \mu(A_1) - \lim_{n\to \infty}\mu(E_n) = \mu(A_1) - \lim_{n\to \infty} \mu(A_1) - \mu(A_n). \qedhere
\]
\end{proof}

\fancyem{Note:} the condition that $\mu(A_1) < \infty$ cannot be dropped. \\
For example,
in $(\N, \mathcal{P}(N), \text{counting measure})$, let $A_n = \{n, n+1, n+2\}, A_1 \supset A_2 \supset A_3 \supset \ldots$ We have $\bigcap_1^\infty = \emptyset \implies \mu\left(\bigcap_1^\infty A_i \right) = 0.$

\begin{definition}
For $(X,  \mathcal{A}, \mu)$ measure space,
\begin{itemize}
\item
$A \subset X$ is a $\mu$-null set if $A \in \mathcal{A}, \mu(A)= 0.$
\item
$A \subset X$ is a $\mu$-subnull set if $\exists B, \mu$-null set $A \subset B.$
\item
$(X,  \mathcal{A}, \mu)$ is a complete measure space if every $\mu$-subnull set is $\mathcal{A}$-measurable.
\end{itemize}
\end{definition}

\begin{definition}$(X,  \mathcal{A}, \mu)$ measure space.
A statement $P(x), x \in X$ holds $\mu$-almost everywhere (a.e.) if the set $\{x \in X \mid P(x) \text{does not hold}\}$ is $\mu$-null.
\end{definition}

\begin{definition}$(X,  \mathcal{A}, \mu)$ measure space.
\begin{itemize}
\item
	$\mu$ is a \emph{finite measure} is $\mu(X) < \infty.$
\item
	$\mu$ is a \emph{$\sigma$-finite measure} if $X = \bigcup_1^\infty X_n, X_n \in \mathcal{A}, \mu(X_n) < \infty.$
\end{itemize}
\end{definition}
HW: every measure space can be "completed."

\section{Outer Measures}
\begin{definition}
An \emph{outer measure} on $X$ is $\mu^*: \mathcal{P}(X) \to [0, \infty] \st$
\begin{itemize}
\item
	$\mu^*(\emptyset) = 0$
\item(monotonicity)
	$\mu^*(A) \leq \mu^*(B)$ if $A \subset B.$
\item(countable subadditivity)
	\[\forall A_1, A_2, \ldots \in X, \mu^*\left(\bigcup_i^\infty A_i\right) \leq \sum_i^\infty \mu^*(A_i).\]
\end{itemize}
\end{definition}
\begin{example}
	For $A \subset \R$,
	\[\mu^*(A) = \inf\left\{\sum_{i=1}^\infty(b_i - a_i) \ \biggr\rvert\ \bigcup_1^\infty (a_i, b_i) \supset A\right\}.\]
	is an outer measure due to the next proposition.
\end{example}
\begin{proposition}\label{prop:induce}(1.19)
Let $\mathcal{E} \in \mathcal{P}(X) \st \emptyset, X \in \mathcal{E}.$
Let $\rho: \mathcal{E} \to [0, \infty] \st \rho(\emptyset) = 0.$
Then
\[
\mu^*(A) = \inf\left\{\sum_{i=1}^\infty \rho(E_i) \ \biggr\rvert\ E_i \in \mathcal{E}, \forall i \in N, \bigcup_1^\infty E_i \supset A\right\}\]
is an outer measure on $X$.
\end{proposition}
\begin{proof}
\begin{enumerate}
	\item
	$\mu^*$ is well-defined (inf is taken over non-empty set.)
	\item
	$\mu^*(\emptyset) = 0$
	\item
	$A \subset B \implies \mu^*(A) \leq \mu^*(B).$
\end{enumerate}
We check the countable subadditivity.

Let $A_1, A_2, \ldots \subset X.$ If one of $\mu^*(A_i) = \infty,$ then the result holds. Suppose $\mu^*(A_n) < \infty, \forall n \in \N.$

"Give your self a room of epsilon":

Fix $\varepsilon > 0.$ We will show \[\mu^*\left(\bigcup_1^\infty A_n\right) \leq \sum_1^\infty \mu^*(A_i) + \varepsilon.\]

For each $n \in \N, \exists E_{n,1}, E_{n,2}, \ldots \in \mathcal{E} \st$ \[\bigcup_{k=1}^\infty E_{n, k} \supset A_n \quad \text{and} \quad \mu^*(A_n) + \frac{\varepsilon}{2^n}\geq \sum_{k=1}^\infty \rho(E_{n, k}).\]

Then, \[
\bigcup_1^\infty A_n \subset \bigcup_{n=1}^\infty \bigcup_{k=1}^\infty E_{n, k} = \bigcup_{(n, k) \in \N^2} E_{n, k}.
\]

\fancyem{Recall:} Tonelli's thm for series.
If $a_{ij} \in [0, \infty], \forall i, j \in \N, $ then
\[
\sum_{(i, j) \in \N^2} a_{ij} = \sum_{i=1}^\infty\sum_{j=1^\infty} a_{ij} = \sum_{j=1}^\infty\sum_{i=1}^\infty a_ij.
\]
Hence 
\begin{align*}
\mu^*\left(\bigcup_{n=1}^\infty A_n\right) \leq \sum_{n=1}^\infty \rho(E_{k, n}) = \sum_{n=1}^\infty \sum_{k=1}^\infty \rho(E_{k, n}) \leq \sum_{n=1}^\infty\left(\mu^*(A_n) + \frac{\varepsilon}{2^n}\right) = \sum_{n=1}^\infty \mu^*(A_n) + \varepsilon.
\end{align*}
We have shown countable subadditivity.
\end{proof}

Outer measure is very close to a measure. Here the textbooks diverge.

\cite{taoIntroductionMeasureTheory2011} introduces Lebesgue measure on $\R$ using topological qualities of subsets of $\R.$\\
\cite{follandRealAnalysisModern1999} introduces abstract method by Carathéodory and Kolmogorov.

\begin{definition}
Let $\mu^*$ be an outer measure on $X$. We say $A \subset X$ is Carathéodory measurable with respect to $\mu^*$ if $\forall E \subset X, \mu^*(E) = \mu^*(E \setminus A) + \mu^*(E \cap A).$ 
\end{definition}
\begin{lemma}
Let $\mu^*$ be an outer measure on $X$. Suppose $B_1, B_2, \ldots, B_N$ are disjoint $C$-measurable sets. Then,
\[
\forall E \subset X, \mu^*\left(E \cap \left(\bigcup_{1}^N B_i\right)\right) = \sum_{i=1}^n \mu^*(E \cap B_i)
\]
\end{lemma}
\begin{proof}
\begin{align*}
\mu^*\left(E \cap \left(\bigcup_1^N B_i\right)\right) = \mu^*(E \cap B_1) +  \mu^*\left(E \cap \left(\bigcup_2^N B_i\right)\right)
\end{align*}
because $B_1$ is $C$-measurable.
Then, iterate.
\end{proof}

Improved version: 

$B_1, B_2, \ldots$ $C$-measurable and \emph{disjoint} $\implies \mu^*\left(E \cap \bigcup_1^\infty B_n\right) = \sum_1^\infty \mu^*\left(E \cap B_n\right), \forall E \subset X.$
\begin{proof}
\begin{align*}
\sum_1^\infty \mu^*(E \cap B_n) & \geq \mu^*\left(E \cap \bigcup_1^\infty B_n\right) \\
& \geq \mu^*\left(E \cap \bigcup_1^N B_n \right) = \sum_1^N \mu^*(E \cap B_n.)
\end{align*}
Take $N \to \infty$ or note that $N \in \N$ is arbitrary we get the result.
\end{proof}


First big theorem:
\begin{theorem}[Carathéodory extension theorem]
Let $\mu^*$ be an outer measure on $X.$ Let $\mathcal{A}$ be the collection of $C$-measurable sets with respect to $\mu^*.$ Then
\begin{enumerate}
\item
	$\mathcal{A}$ us a $\sigma$-algebra on $X$.
\item
	$\mu = \mu^*|_{\mathcal{A}}$ is a measure on $(X, \mathcal{A}).$
\item
	$(X, \mathcal{A}, \mu)$ is a complete measure space.
\end{enumerate}
\end{theorem}
\begin{proof}
\begin{enumerate}
\item
	\begin{enumerate}
	\item
		$\emptyset \in \mathcal{A}.$
	\item
		$\mathcal{A}$ is closed under complements.
	\item
		To show $\mathcal{A}$ closed under countable unions.
		\begin{itemize}
		\item(finite union)\\
		\fancyem{Claim} $A, B \in \mathcal{A} \implies A \cup B \in \mathcal{A}.$
		
		\begin{figure}[h]
		\centering
		\begin{tikzpicture}
		\draw (0,2) circle (1.5) node[left] {$A$};
		\draw (2,2) circle (1.5) node[right] {$B$};
		\draw (-0.5,1.5) rectangle (2.5,0) node[above left] {$E$};
		\node[] at (0, 1.0) {$1$};
		\node[] at (1, 1.2) {$2$};
		\node[] at (2, 1.0) {$3$};
		\node[] at (1, 0.3) {$4$};
		\end{tikzpicture}
		\label{fig:AB}
		\caption{Venn diagram of $A, B, E$}
		\end{figure}
		
		Fix arbitrary $E \subset X$. We need to show 
		\[
			\mu^*(E) = \mu^*(E \cap (A \cup B)) + \mu^*(E \setminus (A \cup B)).		
		\]
		\ie
		\[
			\mu^*(1 \cup 2 \cup 3 \cup 4) = \mu^*(1 \cup 2 \cup 3) + \mu^*(4)
		\]
		Since $A$ is $C$-measurable, we have
		\[
			\mu^*(1 \cup 2 \cup 3 \cup 4) = \mu^*(1 \cup 2) + \mu^*(3 \cup 4)
		\]
		\[
			\mu^*(1 \cup 2 \cup 3) = \mu^*(1 \cup 2) + \mu^*(3)
		\]
		Similarly since $B$ is $C$-measurable, we have
		\[
			\mu^*(3 \cup 4) = \mu^*(3) + \mu^*(4)
		\]
		Hence
		\begin{align*}
		\mu^*(1 \cup 2 \cup 3 \cup 4)
		& = \mu^*(1 \cup 2) + \mu^*(3 \cup 4) \\
		& = \mu^*(1 \cup 2 \cup 3) - \mu^*(3) + \mu^*(3) + \mu^*(4) \\
		& = \mu^*(1 \cup 2 \cup 3) + \mu^*(4).
		\end{align*}
		\item(countable disjoint unions)\\
		Let $A_1, A_2, \ldots \in \mathcal{A}$ and \emph{disjoint}.
		
		Fix $E \subset X$ arbitrary.
		Since $\mu^*$ is countably subadditive, 
		\[
		\mu^*(E) \leq \mu^*\left(E \cap \bigcup_1^\infty\right) + \mu^*\left(E \setminus \bigcup_1^\infty A_n\right)
		\]
		Fix $n \in \N.$
		\begin{align*}
		& \implies \bigcup_1^N A_n \in \mathcal{A} \\
		& \implies \mu^*(E) = \mu^*\left(E \cap \bigcup_1^N\right) + \mu^*\left(E \setminus \bigcup_1^N A_n\right) \\
		& \geq \sum_{1}^N \mu^*(E \cap A_n) + \mu^*\left(E \setminus \bigcup_1^\infty A_n\right) \text{ by lemma}.
		\end{align*}
		Take $n \to \infty.$
		\item
		(countable unions)\\
		Let $A_1, A_2, \ldots \in \mathcal{A}.$ Take $E_1 = A_1, E_n = A_n \setminus \left(\bigcup_1^{n-1} A_i\right)$ for $n \geq 2.$ Then $\bigcup A_n = \bigcup E_n$ and $E_n$'s are disjoint.
		\end{itemize}
	\end{enumerate}
	\item
	Firstly we have $\mu(\emptyset) = \mu^*(\emptyset) = 0.$
	
	Countable additvity of $\mu^*$ on $\mathcal{A}$ follows from the improved lemma with $E = X$.	
	
	\item
	HW. \qedhere
\end{enumerate}
\end{proof}

\section{Hahn-Kolmogorov Theorem}
\fancyem{Recall} \ref{prop:induce} Let $\mathcal{E} \subset \mathcal{P}(X) \st \emptyset, X \in \mathcal{E}.$ Let $\rho: \mathcal{E} \to [0, \infty] \st \rho(\emptyset) = 0$

\[
(\mathcal{E}, \rho) \xrightarrow[1.19]{} (\mathcal{P}(X), \mu^*) \xrightarrow[\text{C-theorem}]{} (A, \mu)
\] 
\fancyem{Question} $\mathcal{E} \subset \mathcal{A}$ and $\mu|_\mathcal{E} = \rho$? No!
\begin{definition}
Let $\mathcal{A}_0$ be an algebra on $X$. We say $\mu_0: \mathcal{A}_0 \to [0, \infty]$ is a \emph{pre-measure} if 
\begin{enumerate}
\item $\mu_0(\emptyset) = 0.$
\item (finite additivity)
\[
\mu_0\left(\bigcup_1^N A_i1\right) = \sum_1^N \mu_0(A_i) \text{ if } A_1, \ldots, A_N \in \mathcal{A}_0 \text{ are disjoint.}
\]
\item (countable additivity within the algebra) If $A \in \mathcal{A}_0$ and 
\[
A = \bigcup_1^\infty A_n, A_n \in \mathcal{A}_0 \text{ and are disjoint, then } \mu_0(A) = \sum_1^\infty \mu_0(A_n)
\]
\end{enumerate}
\end{definition}

\fancyem{Notation:} Folland uses $\mathcal{M}$ for $\sigma$-algebra and $\mathcal{A}$ for algebra. (Jinho) uses $\mathcal{A}$ for $\sigma$-algebra and $\mathcal{A}_0$ for alegbra.

\begin{example}
$\mathcal{A}_0$ finite disjoint unions of $(a, b].$
\[
\mu_0\left( \bigcup_1^\infty (a_i, b_i]\right) = \sum_1^\infty (b_i - a_i) \text{ or $b_i^n - a_i^n, e^{b_i} - e^{a_i},$ etc.}
\]
\end{example}

\begin{lemma}
\begin{itemize}
\item (a) + (c) $\implies$ (b).
\item $\mu_0$ is monotone.
\end{itemize}
\end{lemma}

\begin{theorem}[Hahn-Kolmogorov Theorem]
Let $\mu_0$ be a pre-measure on algebra $\mathcal{A}_0$ on $X$. Let $\mu^*$ be the outer measure induced by $(\mathcal{A}_0, \mu_0)$ in \ref{prop:induce}. Let $\mathcal{A}$ and $\mu$ be the Carathéodory $\sigma$-algebra and measure for $\mu^* \implies (\mathcal{A}, \mu)$ extends $(\mathcal{A}_0, \mu_0) \ie \mathcal{A} \supset \mathcal{A}_0, \mu|_{\mathcal{A}_0} = \mu_0.$ 
\end{theorem}
\begin{proof}
\begin{enumerate}
\item ($\mathcal{A} \supset \mathcal{A}_0$)
Let $A \in \mathcal{A}_0$. 

Question: $A \in \mathcal{A}$? i.e. is $A$ $C$-measurable? i.e. $\mu^*(E) = \mu^*(E \cap A) + \mu^*(E \cap A^c), \forall E \subset X.$

Fix $E \subset X.$
\begin{itemize}
\item (countable) subadditivity of $\mu^* \implies \mu^*(E) \leq \mu^*(E \cap A) + \mu^*(E \cap A^c).$
\item If $\mu^*(E) = \infty$ then $\mu^*(E) = \infty \geq \mu^*(E \cap A) + \mu^*(E \cap A^c).$
\item If $\mu^*(E) < \infty.$

Fix $\varepsilon > 0.$ By the definition of $\mu^*, \exists B_1, B_2, \ldots \in \mathcal{A}_0 \st \bigcup_1^\infty B_n \supset E$ and \[\mu^*(E) + \varepsilon \geq \sum_1^\infty \mu_0(B_n) = \sum_1^\infty \left(\mu_0(B_n \cap A) + \mu_0\left(B_n \cap A^c\right))\right).\]

Note that \[
\bigcup_1^\infty (B_n \cap A) \supset E \cap A, \quad \bigcup_1^\infty \left(B_n \cap A^c\right) \supset E \cap A^c \implies \geq
\]
\end{itemize}

\item
Let $A \in \mathcal{A}_0$. We want to show that $\mu(A) = \mu_0(A).$

By definition, $\mu(A) = \mu^*(A).$
\begin{itemize}
\item
Let $B_i = \begin{cases}
A & i = 1, \\
\emptyset & i = 2
\end{cases} \in \mathcal{A}_0$ and $\bigcup_{1}^\infty B_i \supset A.$

Hence $\mu^*(A) \leq \sum_1^\infty \mu_0(B_i) = \mu_0(A).$

\item
Let $B_i \in \mathcal{A}_0, \bigcup_{1}^\infty B_i \supset A$ an arbitrary collection of sets.

Let $C_1 = A \cap B_1, C_i = A \cap B_i \setminus \left(\bigcup_{j=1}^{i-1} B_j\right).$ Then $A = \bigcup_1^\infty$ is a disjoint countable union. By countable additivitiy we have
\[
\mu_0(A) = \sum_1^\infty \mu_0(C_i) \implies \mu_0(A) \leq \sum_1^\infty \mu_0(B_i).
\]
\end{itemize}
Hence we have $\mu_0(A) = \mu^*(A) = \mu(A)$. We have completed our proof. \qedhere
\end{enumerate}
\end{proof}

\begin{definition}
Such $(\mathcal{A}, \mu)$ is called the \emph{Hahn-Kolmogorov extension} of $(\mathcal{A}_0, \mu_0)$, and is also called the \emph{Carathéodory $\sigma$-algebra} for $(\mathcal{A}_0, \mu_0)$.
\end{definition}

\begin{theorem}[uniqueness of HK extension]\label{th:hkunique}
Let $\mathcal{A}_0$ be an algebra on $X$, $\mu_0$ be a pre-measure on $\mathcal{A}_0$, $(\mathcal{A}, \mu)$ be the Hahn-Kolmogorov extension of $(\mathcal{A}_0, \mu_0)$.
And let $(\mathcal{A}', \mu')$ be another extension of $(\mathcal{A}_0, \mu_0)$.

If $\mu_0$ is \emph{$\sigma$-finite}, then $\mu \mid_{\mathcal{A} \cap \mathcal{A}'} = \mu' \mid_{\mathcal{A} \cap \mathcal{A}'}$.
\end{theorem}

\fancyem{Note} $\sigma$-finite means
\[\forall X, X = \bigcup_1^\infty X_n, X_n \in \mathcal{A}_0, \mu_0(X_n) < \infty.\]

\begin{corollary}
Let $\mu_0$ be a pre-measure on algebra $\mathcal{A}_0$ on $X$. Suppose $\mu_0$ is $\sigma$-finite, then $\exists!$ measure $\mu$ on $\langle \mathcal{A}_0 \rangle$ that extends $\mathcal{A}_0$. Furthermore, 
\begin{enumerate}
\item the completion of $(X, \langle \mathcal{A}_0 \rangle, \mu)$ is the HK extension of $(\mathcal{A}_0, \mu_0).$
\item 
\[
\mu(A) = \inf \left\{\sum_{i=1}^\infty \mu_0(B_i) \mid B_i \subset A_0, \forall i \in \N, \bigcup_1^\infty B_i \supset A\right\}, \forall A \in \overline{\langle \mathcal{A}_0\rangle}.
\]
\end{enumerate}
\end{corollary}

\begin{proof}[Proof of \ref{th:hkunique}]
Let $A \in \mathcal{A} \cap \mathcal{A}'$. We need to show $\mu(A) = \mu^*(A) = \mu'(A).$
\begin{itemize}
\item
$\mu^*(A) \geq \mu'(A)$ (HW)

\item
$\mu(A) \leq \mu'(A)$:
\begin{enumerate}[(i)]
\item Assume $\mu(A) < \infty.$ Fix $\varepsilon > 0$. Then $\exists B_i \in \mathcal{A}_0, \forall i \in \N, \bigcup_1^\infty B_i \supset A \st$
\[
\mu(A) + \varepsilon = \mu^*(A) + \varepsilon \geq \sum_1^\infty \mu_0(B_i) = \sum_1^\infty \mu(B_i) \geq \mu \left(\bigcup_1^\infty B_i\right) = \mu(B)
\]
Hence $\mu(B \setminus A) = \mu(B) - \mu(A) \leq \varepsilon.$

On the other hand, 
\[
\mu(B) = \lim_{N \to \infty} \mu\left(\bigcup_1^N B_i\right) = \lim_{N \to \infty} \mu'\left(\bigcup_1^N B_i\right) = \mu'(B)
\]
by continuity of measure from below.

\[
\mu(A) \leq \mu(B) = \mu'(B) = \mu'(A) + \mu'(B \setminus A) \leq \mu'(A) = \varepsilon.
\]
\item
Assume $\mu(A) = \infty.$

Since $\mu_0$ is $\sigma$-finite, $X = \bigcup_1^\infty X_n, X_n \in \mathcal{A}_0, \mu_0(X_0) < \infty.$
Replacing $X_n$ by $X_1 \cup \ldots \cup X_n$, we may assume $X_1 \subset X_2 \subset \ldots$.

\[\forall n \in N, \mu(A \cap X_n) < \infty \implies \mu(A \cap X_n) \leq \mu'(A \cap X_n).\]

Hence
\[
\mu(A) = \lim_{N \to \infty} \mu(A \cap X_n) \leq \lim_{N \to \infty} \mu'(A \cap X_n) = \mu'(A). \qedhere
\]
\end{enumerate}
\end{itemize}
\end{proof}

\section{Borel Measures on \ttlmath{\R}{Reals}}
\begin{definition}
$F: \R \to \R$ is an \emph{increasing} function if $F(x) \leq F(y)$ for $x < y$.
$F: \R \to \R$ is increasing and right-continuous $\implies F$ is distribution function. 
\end{definition}

\begin{example}\fnl
\begin{itemize}
\item
$F(x) = \begin{cases}
1, & x \geq 0 \\
0, & x < 0.
\end{cases}$
\item
$\Q = \{r_1, r_2, \ldots\}, F_n(x) = \begin{cases}
1 & x \geq r_n \\
0 & x < r_n
\end{cases}$. $\displaystyle F(x) = \sum_{n=1}^\infty \frac{F_n(x)}{2^n}$ is a distribution function.
\end{itemize}
\end{example}

\fancyem{Note} If $F$ is increasing, $F(\infty) \defeq \lim_{x \to \infty} F(x), F(-\infty) \defeq \lim_{x \to -\infty} F(x)$ exists in $[-\infty, \infty]$.

In probability theory, cumulative distribution function (CDF) is a distribution function with $F(\infty) = 1$ and $F(-\infty) = 0$.

There are distributions \cite[Ch.9]{follandRealAnalysisModern1999}, but these are different from \emph{distribution functions}.

\begin{definition}
Suppose $X$ a topological space. $\mu$ on $(X, \mathcal{B}(X))$ is called \emph{locally finite} is $\mu(K) < \infty$ for any compact set $K \subset X$.
\end{definition}

\begin{lemma}
Let $\mu$ be a locally finite Borel measure on $\R \implies$
\[
F_\mu(x) = \begin{cases}
\mu((0, x]), & x > 0 \\
0, & x = 0 \\
- \mu((x, 0]), & x < 0
\end{cases} \text{ is a distribution function.}
\]
\end{lemma}
\begin{proof}
DIY. Use continuity of measure.
\end{proof}

\begin{definition}
$h$-intervals are $\emptyset, (a, b], (a, \infty), (-\infty, b], (\infty, \infty)$.
\end{definition}

\begin{lemma}
Let $\mathcal{H}$ be the collections of finite disjoint unions of $h$-intervals. Then $\mathcal{H}$ is an algebra on $\R$.
\end{lemma}
\begin{proof}
DIY.
\end{proof}

\begin{proposition}[Distribution function defines a pre-measure]
Let $F: \R \to \R$ be a distribution function. For an $h$-interval $I$, define
\[
\ell(I) = \ell_F(I) = \begin{cases}
0,  & I = \emptyset \\
F(b) - F(a), & I = (a, b] \\
F(\infty) - F(a), & I = (a, \infty) \\
F(b) - F(\infty), & I = (-\infty, b] \\
F(\infty) - F(-\infty), & I = (-\infty, \infty). 
\end{cases}
\]
Define $\mu_0 = \mu_{0, F}: \mathcal{H} \to [0, \infty]$ by
\[
\mu_0(A) \defeq \sum_{k=1}^N \ell(I_k) \quad \text{if } A = \bigcup_{k=1}^N I_k, \text{ finite disjoint union of $h$-intervals.}
\]
Then $\mu_0$ is a pre-measure.
\end{proposition}
\begin{proof}
\begin{enumerate}
\item $\mu_0$ is well-defined.
\item $\mu_0$ is finite additive.
\item $\mu_0$ is countable additive within $\mathcal{H}$.

Suppose $A \in \mathcal{H}$ and $A = \bigcup_1^\infty A_i$ a disjoint union, $A_i \in \mathcal{H}$. It is enough to consider the case $A = I, A_k = I_k$ all $h$-intervals. (Why?)

Focus on the case $I = (a, b]$: (HW: check other cases)\\
We have
\[(a, b] = \bigcup_1^\infty(a_n, b_n], \text{ a disjoint union}.\]
Check
\[F(b) - F(a) \stackrel{\text{?}}{=} \sum_1^\infty(F(b_n) - F(a_n))\]
$(a, b] \supset \bigcup_1^N (a_n, b_n] \implies F(b) - F(a) \geq \sum_1^N F(b_n) - F(a_n), \forall N \in \N$. (Arranging them in decreasing order) Take $N \to \infty$ we have
\[F(b) - F(a) \geq \sum_1^\infty(F(b_n) - F(a_n)).\]

Since $F$ is right-continuous, $\exists a' > a \st F(a') - F(a) < \varepsilon$.
For each $n \in \N$, $\exists b'_n > b_n \st F(b'_n) - F(b_n) < \frac{\varepsilon}{2^n}$. 
\begin{align*}
& \implies [a', b] \subset \bigcup_1^\infty(a_n, b'_n) \\
& \implies \exists N \in \N \st [a', b] \subset \bigcup_1^n (a_n, b'_n)\\
& \implies F(b) - F(a') \leq \sum_1^N F(b'_n) - F(a_n) \\
& \implies F(b) - F(a) \leq F(b) - F(a') + \varepsilon \leq \sum_1^\infty(F(b'_n)-F(a_n)) + \varepsilon \\
& \quad \quad \leq \sum_1^\infty\left(F(b_n)-F(a_n) + \frac{\varepsilon}{2^n}\right) + \varepsilon \qedhere
\end{align*}
\end{enumerate}
\end{proof}

Once we have this pre-measure, HK theorem allows us to extended it to a measure.

\begin{theorem}[Locally finite Borel measures on $\R$]\fnl
\begin{enumerate}
\item $F: \R \to \R$ is a distribution function $\implies \exists!$ locally finite Borel measure $\mu_F$ on $\R$ satisfying $\mu_F((a, b]) = F(b) - F(a), \forall a, b, a < b$.
\item Suppose $F, G: \R \to \R$ are distribution functions. Then, $\mu_F = \mu_G$ on $\mathcal{B}(\R)$ if and only if $F - G$ is a constant function.
\end{enumerate}
\end{theorem}
\begin{proof}
HW
\end{proof}

\section{Lebesgue-Stieltjes Measures on \ttlmath{\R}{Reals}}
$F$ distribution function  $\implies \mu_F$ on Carathéodory $\sigma$-algebra $\mathcal{A}_{\mu_F}$.\\
Actually $(\mathcal{A}_{\mu_F}, \mu_F) = (\mathcal{B}(\R), \mu_F)$ (HW3).

\begin{definition}
\begin{itemize}
\item $\mu_F$ on $\mathcal{A}_{\mu_F}$ is called the Lebesgue-Stieltjes measure corresponding to $F$.
\item Special case: $F(x) = x \implies$ Lebesgue measure $(\mathcal{B}, m)$.
\end{itemize}
\end{definition} 

\begin{example}\fnl
\begin{enumerate}
\item $\mu_F((a, b]) = F(b) - F(a)$. $F$ is right-continuous and increasing $\implies F(x_-) \leq F(x) = F(x_+)$.

(HW) $\mu_F(\{a\}) = F(a) - F(a_-), \mu_F([a, b]) = F(b) - F(a_-), \mu_F((a, b)) = F(b_-) - F(a).$

\item
\[F(x) = \begin{cases}
1 & x \leq 0 \\ 0 & x < 0
\end{cases} \implies \mu_F(\{0\}) = 1, \mu_F(\R) = 1, \mu_F(\R \setminus \{0\}) = 0.
\]
$\mu_F$ is the Dirac measure at $0$.

\item
\begin{multline*}
\Q = \{r_1, r_2, \ldots\},\ F(x) = \sum_{n=1}^\infty \frac{F_n(x)}{2^n},\ F_n(x) = \begin{cases}
1 & x \leq r_n \\ 0 & x < r_n
\end{cases} \\
\implies \mu_F(\{v\}) > 0, \forall v \in \Q,\ \mu_F(\R \setminus \Q) = 0.
\end{multline*}

\item 
If $F$ is continuous at $a, \mu_F(\{a\}) = 0$.

\item
$F(x) = x \implies m((a, b])) = m((a, b)) = m([a, b]) = b - a.$

\item
$F(x) = e^x, \implies \mu_F((a, b]) = \mu_F((a, b)) = e^b - e^a$
\end{enumerate}
(a), (b) are examples of discrete measure.
\end{example}

\begin{example}
[Middle thirds Cantor set $\mathcal{C} = \bigcup_{n=1}^\infty K_n$]\fnl

$\mathcal{C}$ is uncountable set with $m(\mathcal{C}) = 0.$
\[x \in \mathcal{C} \implies x = \sum_{n=1}^\infty \frac{a_n}{3^n}, a_n \in \{0, 2\}.\]

We are interested in the Cantor function $F$.
\end{example}

\begin{example}
Cantor function $F$ is continuous and increasing.
This defines the Cantor measure $\mu_F(\R \setminus \mathcal{C}) = 0, \mu_F(\mathcal{C}) = 1, \mu_F(\{a\}) = 0.$ Compare with Lebesgue measure $m(\R \setminus \mathcal{C}) = \infty > 0, \mu(\mathcal{C}) = 0, m(\{a\}) = 0$.
\end{example}

\section{Regularity Properties of Lebesgue-Stieltjes Measures}
\begin{lemma}\label{le:LSreal}
$\mu$ is Lebesgue-Stieltjes measure on $\R \implies$ 
\begin{align*}
    \mu(A) & = \inf\left\{\sum_1^\infty\mu((a_i, b_i])\ \biggr\vert\ \bigcup_1^\infty(a_i, b_i] \supset A\right\} \\
           & =\inf\left\{\sum_1^\infty\mu((a_i, b_i))\ \biggr\vert\ \bigcup_1^\infty(a_i, b_i) \supset A\right\}
\end{align*}
\end{lemma}
\begin{proof}
	Using the continuity of measure.
\end{proof}

\begin{theorem}
	$\mu$ is a Lebesgue-Stieltjes measure. Then $\forall A \in \mathcal{A}_\mu$,
	\begin{enumerate}
		\item (outer regularity) \[
			\mu(A) = \inf\{\mu(O) \mid \text{open } O \supset A\}.	
		\]
		\item (inner regularity) \[
			\mu(A) = \sup\{\mu(K) \mid \text{compact } K \subset A\}.
		\]
	\end{enumerate}
\end{theorem}
\begin{proof}
	\begin{enumerate}
		\item Followed from \ref{le:LSreal}.
		\item Let $s = \sup\{\ldots\}$. 
		Monotonicity $\implies \mu(A) \geq s$.
		\begin{itemize}
			\item ($A$ bounded)
			$\overline{A} \in \mathcal{B}(\R) \subset \mathcal{A}_\mu, \overline{A}$ bounded $\implies \mu(\overline{A}) < \infty$.

			Fix $\varepsilon > 0$. By 1, $\exists$ open $O \supset \overline{A} \setminus A, \mu(O) - \mu(\overline{A} \setminus A) = \mu(O \setminus (\overline{A} \setminus A))\leq \varepsilon$.

			Let $K = \underbrace{A \setminus O}_{K \subset A} = \underbrace{\overline{A} \setminus O}_{\text{compact}}$. Show that $\mu(K) \geq \mu(A) - \varepsilon$.

			\item ($A$ unbounded but $\mu(A) < \infty$)
			We have
			\[
				A = \bigcup_1^\infty A_n,\ A_n = A \cap [-n, n],\ A_1 \subset A_2 \subset \ldots	
			\]
			Hence \[
				\lim_{n \to \infty} \mu(A_n) = \mu(A) < \infty.
			\]

			\item ($\mu(A) = \infty$)
			\[
				\lim_{n \to \infty} \mu(A_n) = \mu(A) = \infty.
			\]
			Fix $L > 0$. $\exists N \st \mu(A_N) \geq L$. \qedhere
		\end{itemize}
	\end{enumerate}
\end{proof}

\begin{definition}
	Suppose $X$ a topological space.

	A \emph{$G_\sigma$-set} is $\displaystyle G = \bigcup_1^\infty O_i$, $O_i$ open. 
	An \emph{$F_\sigma$-set} is $\displaystyle F = \bigcup_1^\infty F_i$, $F_i$ closed.
\end{definition}
\begin{theorem}
	Suppose $\mu$ a LS measure. Then the following statements are equivalent:
	\begin{enumerate}
		\item $A \in \mathcal{A}_\mu$.
		\item $A = G \setminus M$, $G$ is a $G_\sigma$-set, and $M$ is $\mu$-null.
		\item $A = F \cup N$, $F$ is an $F_\sigma$-set, and $N$ is $\mu$-null.
	\end{enumerate}
\end{theorem}
\begin{proof}
	(b) $\implies$ (a) and (c) $\implies$ (a) are clear.

	\begin{itemize}
		\item (a) $\implies$ (c) \fnl
		\begin{enumerate}[(i)]
			\item Assume $\mu(A) < \infty$. By inner regularity,
			\[
				\forall n \in \N, \exists \text{ compact } K_n \subset A \st \mu(K_n) + \frac{1}{n} \geq \mu(A).
			\]
			Let $F = \bigcup_1^\infty K_n$. Then $N = A \setminus F$ is $\mu$-null.
	
			\item 
			Assume $\mu(A) = \infty$.
			We construct
			\[
				A = \bigcup_{k \in \Z}A_k, A_k = A \cap (k, k+1].	
			\]
			By (i), $\forall k \in \Z, A_k = F_k \cup N_k$. Hence
			\[
				A = \underbrace{\left(\bigcup_k F_k\right)}_{F\sigma} \cup \underbrace{\left(\bigcup_k N_k\right)}_{\text{$\mu$-null}}.
			\]
		\end{enumerate}
		
		\item (a) $\implies$ (b)
		\[A^c = F \cup N, A = F^c \cup N^c = F^c \setminus N. \qedhere\]
	\end{itemize}
\end{proof}

\begin{proposition}
	Suppose $\mu$ a LS measure, $A \in \mathcal{A}_\mu$, $\mu(A) < \infty$. Then\[
		\forall \varepsilon > 0, \exists I = \bigcup_1^{N = N(\varepsilon)} I_i, \text{ disjoint open intervals} \st \mu(A \triangle I) \leq \varepsilon.	
	\]
\end{proposition}
\begin{proof}
	DIY - use outer regularity.
\end{proof}

Properties of Lebesgue measure
\begin{theorem}
	\[A \in \mathcal{L} \implies A + s \in \mathcal{L}, rA \in \mathcal{L}, \forall r, s \in \R.\]
	In addition, $m(A + r) = m(A)$ and $m(rA) = rm(A)$.
\end{theorem}
\begin{proof}
	DIY.
\end{proof}

\begin{example}\fnl
	\begin{enumerate}
		\item $\Q = \{r_1\}_{i=1}^\infty$, which is dense in $\R$.
		Let $\varepsilon > 0$ and \[
			O = \bigcup_{i=1}^\infty\left(r_i - \frac{\varepsilon}{2^i}, r_i + \frac{\varepsilon}{2^i}\right).
		\] $O$ is open and dense in $\R$.
		We have
		\[
			m(O) \leq \sum_{i=1}^\infty \frac{2\varepsilon}{2^i} = 2\varepsilon, \partial O = \overline{O} \setminus O, m(O) = \infty.
		\]

		\item $\exists$ uncountable set $A$ with $m(A) = 0$.
		\item $\exists A$ with $m(A) > 0$, but $A$ contains no non-empty open interval.
		\item $\exists A \notin \mathcal{L}$ that is Vitali set.
		\item $\exists A \in \mathcal{L} \setminus \mathcal{B}(\R)$. We will deal with that later.
	\end{enumerate}
\end{example}

\chapter{Integration}
\section{Measurable Functions}
\begin{definition}
	Suppose $(X, \mathcal{A})$, $(Y, \mathcal{B})$ two measurable spaces. 
	$f: X \to Y$ is $(\mathcal{A}, \mathcal{B})$-measurable if 
	\[\forall B \in \mathcal{B}, f^{-1}(B) \in \mathcal{A}.\] 
\end{definition}

\begin{lemma}\label{le:clever}
	Suppose $\mathcal{B} = \langle\mathcal{E}\rangle$. Then \[f: X \to Y \text{ is }(\mathcal{A}, \mathcal{B}) \text{-measurable } \iff \forall E \in \mathcal{E}, f^{-1}(E) \in \mathcal{A}.\]
\end{lemma}
\begin{proof}
	\begin{itemize}
		\item [$\implies$] clear
		\item [$\impliedby$] Let $\mathcal{D} = \{E \subset Y \mid f^{-1}(E) \in \mathcal{A}\}$. We have $\mathcal{E} \subset \mathcal{D}$ by assumption. In addition $\mathcal{D}$ is a $\sigma$-algebra $\implies \langle\mathcal{E}\rangle \subset \mathcal{D}$.\qedhere
	\end{itemize} 
\end{proof}

\begin{definition}
	Suppose $(X, \mathcal{A})$ a measurable space.
	\[
	\left.\begin{array}{l}
		f: X \to \R \\
		f: X \to \overline{\R} = [-\infty, \infty] \\
		f: X \to \C
	\end{array}	\right\rbrace \text{ is $\mathcal{A}$-measurable if }
	\left\lbrace\begin{array}{l}
		f \text{ is $(\mathcal{A}, \mathcal{B}(\R))$-measurable} \\
		f \text{ is $(\mathcal{A}, \mathcal{B}(\overline{\R}))$-measurable} \\
		\re f, \im f: X \to \R \text{ are $\mathcal{A}$-measurable.}
	\end{array}\right.
	\]
	Here $\mathcal{B}(\overline{\R}) = \{E \subset \overline{\R} \mid E \cap R \in \mathcal{B}(\R)\}$.
\end{definition}

\begin{lemma}
	Suppose $f: X \to \R$. Then the followings are equivalent:
	\begin{enumerate}
		\item $f$ is $\mathcal{A}$-measurable
		\item $\forall a \in \R, f^{-1}((a, \infty)) \in \mathcal{A}$.
		\item $\forall a \in \R, f^{-1}([a, \infty)) \in \mathcal{A}$.
		\item $\forall a \in \R, f^{-1}((-\infty, a)) \in \mathcal{A}$.
		\item $\forall a \in \R, f^{-1}((-\infty, a]) \in \mathcal{A}$.
	\end{enumerate}
	For $f: X \to \overline{\R}$, change the interval to include $-\infty$ and $\infty$.
\end{lemma}
\begin{proof}
	By \ref{le:clever}.
\end{proof}



\begin{example}
	$\mathcal{A} = \mathcal{P}(X) \implies$ every function is $\mathcal{A}$ measurable.

	$\mathcal{A} = \{\emptyset, X\} \implies$ only $\mathcal{A}$ functions are constant functions.
\end{example}

\fancyem{Properties} Suppose $f, g: X \to \R$, $\mathcal{A}$-measurable functions.
\begin{enumerate}
	\item $\phi: \R \to \R$, $\mathcal{B}(\R)$ measurable (i.e. Borel measurable) $\implies \phi \circ f: X \to \R$ is $\mathcal{A}$-measurable.
	\item $-f, 3f, f^2, |f|$ are $\mathcal{A}$-measurable, $\frac{1}{f}$ is $\mathcal{A}$-measurable if $f(x) = 0, \forall x \in X$.
	\item $f + g$ is $\mathcal{A}$-measurable
	\[
		(f + g)^{-1}((a, \infty)) = \bigcup_{r \in \Q}\left(f^{-1}((r, \infty)) \cap g^{-1}((a-r,\infty))\right).
	\]
	\item $fg$ is $\mathcal{A}$-measurable \[
		f(x)g(x) = \frac{1}{2}\left((f(x)+g(x))^2 - f(x)^2 - g(x)^2\right).
	\]
	\item $(f \wedge g)(x) = \min\{f(x), g(x)\}$, $(f \vee g)(x) = \max\{f(x), g(x)\}$ are $\mathcal{A}$-measurable.
	\item $f_n: X \to \overline{\R}$ are a sequence of $\mathcal{A}$-measurable functions $\implies$
	\[
		\sup f_n, \inf f_n, \limsup_{n \to \infty} f_n, \liminf_{n \to \infty} f_n \text{ are $\mathcal{A}$-measurable.}
	\]
	\item If $f(x) = \lim_{n \to \infty}f_n(x)$ converges for every $x \in X$, then $f$ is measurable.
\end{enumerate}

\begin{example}
	Suppose $f: \R \to \R$ is continuous. Then $f$ is Borel measurable $\implies f$ is Lebesgue measurable. (Preimage of an open set of a continuous function is open.)
\end{example}
\begin{definition}
	For $f: X \to \overline{\R}$, let $f^+ = f \vee 0$, $f^- = (-f) \vee 0$.
\end{definition}
\fancyem{Note} $\supp f^+ \cap \supp f^- = \emptyset$.
$f(x) = f^+(x) - f^-(x)$. $f$ is $\mathcal{A}$-measurable $\iff f^+, f^-$ measurable.

\begin{definition}
	For $E \subset X$, characteristic (indicator) funtion of $E$
	\[
		\chi_E(x) = 1_E(x) = \begin{cases}
			1 & x \in E \\
			0 & x \in E^c.
		\end{cases}	
	\]
	$1_E$ is $\mathcal{A}$-measurable $\iff E \in \mathcal{A}$.
\end{definition}

\begin{definition}
	Suppose $(X, \mathcal{A})$ a measurable space. A \emph{simple function} $\phi: X \to \C$ that is $\mathcal{A}$-measurable and takes only finitely many values.
\end{definition}
\[
	\phi(X) = \{c_1, \ldots, c_N\}, c_i \neq \pm \infty, E_i = \phi^{-1}(c_i) \in \cA \implies \phi = \sum_{i=1}^N c_i 1_{E_i}.
\]

\begin{theorem}
	Suppose $(X, \cA)$ a measurable space and $f: X \to [0, \infty]$. Then the followings are equivalent:
	\begin{enumerate}
		\item $f$ is $\cA$-measurable.
		\item $\exists$ simple functions $0 \leq \phi_1(x) \leq \phi_2(x) \leq \ldots \leq f(x)$ such that \[\lim_{n \to \infty} \phi_n(x) = f(x),\ \forall x \in X.\] ($f$ is the pointwise upward limit of simple functions.)
	\end{enumerate}
\end{theorem}
\begin{proof}
	\begin{itemize}
		\item (b) $\implies$ (a) is easy: $\displaystyle f(x) = \sup_{n \in \N} \phi_n(x)$.
		\item (a) $\implies$ (b): suppose $f$ is $\cA$-measurable.
		
		Fix $n \in \N$. Let $F_n = f^{-1}([2^n, \infty]) \in \cA$. For
		\[0 \leq k \leq 2^{2n} - 1,\ E_{n, k} = f^{-1}\left(\left[\frac{k}{2^n}, \frac{k+1}{2^n}\right]\right) \in \cA.\]

		Let $\displaystyle \phi_n(x) = \sum_{k=0}^{2^{2n} - 1} 1_{E_{n, k}} + 2^n1_{F_n}$.

		This shows that \begin{itemize}
			\item $\displaystyle 0 \leq \phi_1(x) \leq \phi_2(x) \leq \ldots \leq f(x),\ \forall x \in X$.
			\item $\displaystyle \forall x \in X \setminus F_n, 0 \leq f(x) - \phi_n(x) \leq \frac{1}{2^n}$.
		\end{itemize}
		Since $F_1 \supset F_2 \supset \ldots$ and $\displaystyle \bigcap_1^\infty F_n = f^{-1}(\{\infty\})$, we have \begin{itemize}
			\item $\displaystyle x \in f^{-1}([0, \infty)) = X \setminus \left(\bigcap_1^\infty F_n\right) \implies \lim_{n \to \infty} \phi_n(x) = f(x)$.
			\item $\displaystyle x \in f^{-1}(\{\infty\}) = \bigcap_1^\infty X_n \implies \phi_n(x) \geq 2^n \implies \lim_{n \to \infty} \phi_n(x) = \infty = f(x)$. \qedhere 
		\end{itemize}
	\end{itemize}
\end{proof}

\begin{corollary}
	If $f$ is bounded on a set $A \subset \R$ (i.e. $\exists L > 0 \st |f(x)| \leq L,\ \forall x \in A)$ then $\phi_n \to f$ uniformly on $A$.
\end{corollary}
\begin{proof}
	DIY.
\end{proof}

\begin{corollary}
	$f: X \to \C$, measurable function $\iff \exists$ simple functions $\phi_n: X \to \C \st 0 \leq |\phi_1| \leq |\phi_2| \leq \ldots \leq |f|$ and $\phi_n$ converges to $f$ pointwise. (Again, if $f$ is bounded the convergence can be uniform.)   
\end{corollary}

\section{Integration of Nonnegative Functions}
\begin{definition}\label{def:nonneg}
	Suppose $(X, \cA, \mu)$ a measure space and $\phi = \sum_{i=1}^N c_i1_{E_i}: X \to [0, \infty]$ a simple function.
	Let \[
		\int \phi = \int \phi \df\mu = \int_X \phi \df \mu = \sum_1^N c_i\mu(E_i).	
	\]
\end{definition}

\begin{proposition}
	Suppose $\phi, \psi \geq 0$ are simple functions. Then, 
	\begin{itemize}
		\item \ref{def:nonneg} is well-defined.
		\item $\displaystyle \int c\phi = c \int \phi, c \in [0, \infty)$.
		\item $\displaystyle \int (\phi + \psi) = \int \phi + \int \psi$.
		\item $\displaystyle \phi(x) \geq \psi(x),\ \forall x \implies \int \phi \geq \int \psi$.
		\item $\displaystyle \nu(A) = \int_A \phi \df \mu$ is a measure on $(X, \cA)$.
	\end{itemize}
\end{proposition}
\begin{proof}
	DIY.
\end{proof}

\begin{definition}
	Suppose $(X, \cA, \mu), f: X \to [0, \infty]$ is $\cA$-measurable. 

	Define \[
		\int f = \int f \df\mu = \sup\left\lbrace \int \phi \mid 0 \leq \phi \leq f, \phi \text{ simple} \right\rbrace.	
	\]
\end{definition}
\begin{proposition}\fnl
	\begin{itemize}
		\item If $f$ is a simple function then two definitions are the same.
		\item $\displaystyle \int cf = c\int f$.
		\item $\displaystyle f \geq g \geq 0 \implies \int f \geq \int g$.
		\item $\displaystyle \int f + g = \int f + \int g$. (A bit harder to check)
	\end{itemize}
\end{proposition}
\begin{theorem}[Monotone convergence theorem]
	Suppose $(X, \cA, \mu)$ a measure space and \begin{itemize}
		\item $f: X \to [0, \infty]$ is $\cA$-measurable, $\forall n \in \N$.
		\item $0 \leq f_1(x) \leq \ldots $.
		\item $\displaystyle \lim_{n \to \infty} f_n(x) = f(x)$.
	\end{itemize}
	Then
	\[
		\int f = \lim_{n \to \infty} \int f_n.	
	\]
\end{theorem}
\begin{proof}
	Note that $\lim_{n \to \infty} f_n(x)$ converges $\forall x \in X$ and $\lim_{n \to \infty} f_n(x)$ converges.
	\begin{itemize}
		\item $\displaystyle f_n \leq f \implies \int f_n \leq \int f \implies \lim_{n \to \infty} \int f_n \leq \int f$.
		\item Fix simple function $0 \leq \phi \leq f$. Enough to show that $\displaystyle \lim_{n \to \infty} \int f_n \geq \int \phi$.
		
		Now fix $\alpha \in (0, 1)$. Enough to prove that $\displaystyle \lim_{n \to \infty} \int f_n \geq \alpha \int \phi$.

		Let $A_n = \{x \mid f_n(x) \geq \alpha \phi(x)\}$. \begin{itemize}
			\item $A_n \in \cA$.
			\item $A_1 \subset A_2 \subset \ldots$
			\item $\displaystyle \bigcup_{n=1}^\infty A_n = X$. (check!)
		\end{itemize}
		So we have
		\[
			\int f_n \geq \int f_n1_{A_n} \geq \int \alpha \phi 1_{A_n}	= \alpha \nu(A_n)
		\] where $\nu(A) = \int_A \phi$ is a measure.
		\[\implies \lim_{n \to \infty} \int f_n \geq \lim_{n \to \infty} \nu(A_n) = \alpha \nu(x) = \alpha \int \phi. \qedhere\]
	\end{itemize}
\end{proof}
\begin{corollary}
	$f, g \geq 0$ measurable $\displaystyle \implies \int f + g = \int f + \int g$. 
\end{corollary}
\begin{proof}
	$\exists$ simple functions $0 \leq \phi_1 \leq \phi_2 \leq \ldots, \phi_n \to f$ pointwise and $0 \leq \psi_1 \leq \psi_2 \leq \ldots, \psi_n \to g$ pointwise.

	By MCT, we have
	\[
	 	\int (f + g) =  \lim_{n \to \infty} \int (\phi_n + \psi_n) = \lim_{n \to \infty} \int \phi_n + \int \psi_n = \int f + \int g. \qedhere
	\]
\end{proof}

\begin{corollary}[Tonelli's theorem for series and integrals]
	Given $s_n \geq 0, \forall n \in \N$ measurable functions.
	Then
	\[
		\int \sum_{n=1}^\infty	s_n = \sum_{n=1}^\infty \int s_n.
	\]
\end{corollary}
\begin{proof}
	Let $f_N = \sum_{n=1}^N s_n, 0 \leq f_1 \leq f_2 \leq \ldots$.
	\[
		\lim_{N \to \infty}f_N(x) = \sum_{n=1}^\infty s_n(x)\]
	By MCT, we have \[
		\lim_{N \to \infty} \sum_1^N s_n = \sum_1^\infty s_n	
	\]
\end{proof}
\begin{theorem}[Fatou's lemma]
	Suppose $f_n \geq 0$ measurable. Then \[\int \liminf_{n \to \infty} f_n \leq \liminf_{n \to \infty}\int f_n.\]
\end{theorem}
Recall that \[
\liminf_{n \to \infty} f_n \defeq \lim_{k \to \infty} \inf_{n \geq k} f_n = \sup_{k \in \N} \inf_{n \geq k} f_n,
\]
and
\[
\lim_{n \to \infty} a_n \text{ exists} \iff \limsup_{n \to \infty} a_n = \liminf_{n \to \infty} a_n.
\]
\begin{proof}
	Let $g_k = \inf_{n \geq k} f_n \implies s_k$ measurable and $0 \leq g_1 \leq g_2 \leq \ldots$. By MCT, we have \[
		\int \liminf_{n \to \infty} = \int\lim_{k \to \infty} s_k = \lim_{k \to \infty} \int s_k = \lim_{k \to \infty} \int \inf_{n \geq k} f_n
	\]
	\begin{align*}
		& \inf_{n \geq k} f_n \leq f_m, \forall m \geq k \\
		\implies & \int \inf_{n \geq k}f_n \leq \int f_m, \forall m \geq k \\
		\implies & \int \inf_{n \geq k}f_n \leq \inf_{m \geq k}\int f_m
	\end{align*}

\end{proof}

\begin{example}
	Suppose $(\R, \mathcal{L}, m)$
	\begin{enumerate}
		\item (escape to horizontal infinity) $f_n = 1_{(n, n+1)}$.
		
		We see that $f_n \to 0 = f$ pointwise and $\int f_n = 1, \forall n, \int f = 0$.

		\item (escape to width infinity) $f_n = \frac{1}{n}1_{(0, n)}$.
		\item (escape to vertical infinity) $f_n = n1_{(0, 1/n)}$.
	\end{enumerate}	
\end{example}

\begin{lemma}[Markov's inequality]
	$f \geq 0$ is measurable $\implies$ \[\forall c \in (0, \infty),\ \mu\left(\left\lbrace x \mid f(x) \geq c \right\rbrace\right) \leq \frac{1}{c}\int f.\]
\end{lemma}
\begin{proof}
	Let $E = \left\lbrace x \mid f(x) \geq c \right\rbrace$. Then \[f(x) \geq c1_{E}(x) \implies \int f \geq c\int 1_E = c \mu(E). \qedhere\] 
\end{proof}
\begin{proposition}\label{prop:zeroint}
	Suppose $f \geq 0$ measurable. Then $\int f = 0 \iff f = 0$ almost everywhere (a.e.) \[\int f \df\mu = \mu(A) = 0,\ A = \{x \mid f(x) > 0\} = f^{-1}((0, \infty])\]
\end{proposition}
\begin{proof}
	\begin{enumerate}
		\item Assume $f = \phi$ a simple function. We may assume \[\phi = \sum_{i=1}^N c_i1_{E_i},\ c_i \in (0, \infty),\ E_i\text{'s are disjoint.}\]
		\begin{align*}
			& \int \phi = \sum_{i=1}^N c_i \mu(E_i) = 0 \\
		\iff & \mu(E_1) = \ldots = \mu(E_N) = 0 \\
		\iff & \mu(A) = 0,\ A = \bigcup_{i=1}^N E_i.
		\end{align*}

		\item General $f \geq 0$. \begin{enumerate}
			\item Assume $\mu(A) = 0$ (i.e. $f = 0$ a.e.)
			
			Let $0 \leq \phi \leq f, \phi$ is simple.
			\begin{align*}
				& \implies \phi(x) = 0,\ \forall x \in A^c \\
				& \implies \phi = 0 \text{ a.e.} \\
				& \implies \int \phi = 0
			\end{align*}
			Then $\int f = 0$ by the definition of $\int f$.

			\item Assume $\inf f = 0$. Let $A_n = f^{-1}\left(\left[\frac{1}{n}, \infty\right]\right)$
			\begin{align*}
				\implies & A_1 \subset A_2 \subset \ldots \\
				& \bigcup_1^\infty A_n = f^{-1}\left(\bigcup_1^\infty\left[\frac{1}{n}, \infty\right]\right) = f^{-1}((0, \infty)) = A \\
				& \mu(A_n) = \mu\left(\left\lbrace x \mid f(x) \geq \frac{1}{n}\right\rbrace\right) \leq n \int f = 0 \\
				\implies & \mu(A) = \lim_{n \to \infty} \mu(A_n) = 0
			\end{align*}
			by the continuity of measure from below. \qedhere
		\end{enumerate}
	\end{enumerate}
\end{proof}

\begin{corollary}
	$f, g \geq 0$ are measurable, $f = g$ a.e. $\implies \int f = \int g$.
\end{corollary}
\begin{proof}
	Let $A = \{x \mid f(x) \geq g(x)\}$. $A$ is measurable (why?). By assumption $\mu(A) = 0$. Hence $f1_A = 0$ a.e.
	\begin{align*}
		\int f & = \int f(1_A + 1_{A^c}) \\
		& = \int f1_A + \int f1_{A^c} \\
		& = \int f1_{A^c} \\
		& = \int g1_{A^c} = \int g1_{A} + \int g1_{A^c} = \int g. \qedhere
	\end{align*}
\end{proof}

\begin{corollary}
	$f_n \geq 0$ measurable. Then 
	\begin{enumerate}
		\item \[\left.\begin{array}{r}
			0 \leq f_1 \leq f_2 \leq  \ldots \leq f\ a.e. \\
			\lim_{n \to \infty} f_n = f\ a.e.
		\end{array}\right\} \implies \lim_{n \to \infty} f_n = \int f.\]
		\item \[
			\lim_{n \to \infty} f_n = f\ a.e \implies \int f \leq \liminf_{n \to \infty} \int f_n.	
		\]
	\end{enumerate}
\end{corollary}

\section{Integration of Complex Functions}
\epigraph{I was afraid that you are bored.}{--- \textup{Jinho Baik on homework}}
\begin{definition}
	$(X, \mathcal{A}, \mu)$ measure space. \begin{itemize}
		\item $f:X \to \overline{\R}$ or $f: X \to \C$ measurable functions is called \emph{integrable} if $\int |f| < \infty$. Then \[\int f = \int f^+ - \int f^- \text{ or } \int f = \int u^+ - \int u^- + i\left(\int v^+ - \int v^-\right).\]
		\item Suppose $f: X \to \overline{\R}$. Define \[\int f = \begin{cases}
			\infty & \displaystyle \int f^+ = \infty, \int f^- < \infty, \\[1em]
			-\infty & \displaystyle  \int f^+ < \infty, \int f^- = \infty.
		\end{cases}\]
	\end{itemize}
\end{definition}

\begin{lemma}
	Suppose $f, g: x \to \overline{\R} \to \C$ integrable.
	Assume $f(x) + g(x)$ is well-defined $\forall x \in X$. (i.e. $\infty + (-\infty)$, $-\infty + \infty$ do not occur) \begin{enumerate}
		\item $f + g$, $cf, c \in \C$ are integrable.
		\item $\displaystyle \int f + g = \int f + \int g$.
		\item $\displaystyle \left|\int f\right| \leq \int |f|$. (This is essentially triangle inequality.)
	\end{enumerate}
\end{lemma}
\begin{proof}
	Check \cite[p.53]{follandRealAnalysisModern1999}.
\end{proof}
\begin{lemma}
	$(X, \mathcal{A}, \mu)$ measure space and $f$ \emph{integrable} function on $X$.
	\begin{enumerate}
		\item $f$ is finite a.e. (i.e. $\{x \in X: |f(x)| = \infty\}$ is a null set)
		\item The set $\{x \in X: f(x) \neq 0\}$ is $\sigma$-finite.
	\end{enumerate}
\end{lemma}
\begin{proof}
	HW5Q8.
\end{proof}

\begin{proposition}
	Suppose $(X, \mathcal{A}, \mu)$ a measure space.
	\begin{enumerate}
		\item If $h$ is integrable on $X$, then \[\int_E h = 0, \forall E \in \mathcal{A} \iff \int |h| = 0 \iff h = 0\text{ a.e.}\]
		\item If $f, g$ are integrable on $X$ then \[\int_E f = \int_E g, \forall E \in \mathcal{A} \iff f = g\text{ a.e.}\]
	\end{enumerate}
\end{proposition}
\begin{proof}
	\begin{enumerate}
		\item $\int |h| = 0 \iff h = 0$ is shown in \ref{prop:zeroint}.
		\[
			\int |h| = 0 \implies \left|\int_E h\right| \leq \int_E |h| \leq \int |h| = 0.
		\]
		On the other hand, assume $\int_E h = 0, \forall E \in \mathcal{A}$. $h = u + iv = u^+ - u^- + i(v^+ - v^-)$. Let $B = \{x \mid u^+(x) > 0\}$.
		\[0 = \re\int_B h = \int_B u = \int_B u^+ = \int_B u^+ + \int_{B^c} u^+ = \int u^+ \implies u^+ = 0 \text{ a.e.}\]
		Similarly, we get $u^-, v^+, v^- = 0$ a.e..
		\item follows from (a). \qedhere
	\end{enumerate}
\end{proof}
\begin{theorem}[Dominated convergence theorem]
	Suppose $(X, \mathcal{A}, \mu)$ a measure space and
	\begin{enumerate}
		\item $f_n$ \emph{integrable} on $X$, $\forall n \in \N$.
		\item $\displaystyle \lim_{n \to \infty} f_n(x) = f(x)$ a.e. (pointwise)
		\item $\exists g: X \to [0, \infty] \st$ \begin{itemize}
			\item $g$ is integrable.
			\item $|f_n(x)| \leq g(x)$ a.e., $\forall n \in \N$.
		\end{itemize}
	\end{enumerate}
	Then \[\lim_{n \to \infty} \int f_n = \int f.\]
\end{theorem}
\begin{proof}
	Let $F$ be the countable union of null sets on which (a)-(c) may fail. Modifying the def of $f_n, f, g$ on $F$ we may assume (a)-(c) hold everywhere. (b)+(c) $\implies f$ is integrable.

	We consider $\overline{\R}$-valued case only. ($\C$-valued case follows)
	\begin{align*}
		& g + f_n \geq 0, g - f_n \geq 0 \\
		\xRightarrow[]{\text{Fatou}} & \int g + f \leq \liminf_{n \to \inf} \int g + f_n,\quad \int g - f \leq \liminf_{n \to \inf} \int g - f_n  \\
		\implies & \int g + \int f \leq \int g + \liminf_{n \to \infty} \int f_n,\quad \int g - \int f \leq \int g - \limsup_{n \to \infty} \int f_n \\
		\xRightarrow[]{\int g < \infty} & \int f \leq \liminf_{n \to \infty} \int f_n,\quad - \int f \leq - \limsup_{n \to \infty} \int f_n. \\
		\implies & \int f \leq \liminf_{n \to \infty} \int f_n \leq \limsup_{n \to \infty} \int f_n \leq \int f
	\end{align*}
	So we should have \[ \int f = \liminf_{n \to \infty} \int f_n = \limsup_{n \to \infty} \int f_n. \qedhere \]
\end{proof}
Next we investigate the question:
\[\int \sum_{1}^\infty f_n \stackrel{\text{?}}{=} \sum_{1}^\infty \int f_n.\]
Tonelli: yes if $f_n \geq 0$.
Fubini:
\begin{corollary}[Fubini's theorem for series and integrals]
	\[\left.\begin{array}{r}
		f_n \text{ integrable} \\
		\displaystyle \sum_1^\infty \int |f_n| < \infty
	\end{array}\right\} \implies \int \sum_{1}^\infty f_n = \sum_{1}^\infty \int f_n.\]
\end{corollary}
\begin{proof}
	$\displaystyle G(x) = \sum_1^\infty |f_n(x)| \geq |F_N(x)|, F_N(x) = \sum_1^N f_n(x)$.
\end{proof}

\section{\ttlmath{L^1}{L-1} space}
\begin{definition}
	Suppose $V$ is a vector space over field $\R$ or $\C$. A \emph{seminorm}
on $V$ is $\|\cdot\|: V \to [0, \infty) \st$
\begin{itemize}
	\item $\|cv\| = |c|\|v\|, \forall v \in V, \forall c$ scalar
	\item $\|v + w\| \leq \|v\| + \|w\|$, triangle inequality
\end{itemize}
A \emph{norm} is a seminorm such that $\|v\| \iff v = 0$.
\end{definition}

\begin{lemma}
	A normed vector space is a metric space with metric $\rho(v, w) = \|v - w\|$.
\end{lemma}
\begin{proof}{(DIY)}
	\begin{itemize}
		\item $\rho(v, w) = 0 \iff \|v - w\| = 0 \iff v - w = 0 \iff v = w$.
		\item $\rho(v, w) = \norm{v - w} = \norm{-1(w - v)} = |-1|\norm{w - v} = \rho(w, v)$.
		\item $\rho(v, w) + \rho(w, z) = \norm{v - w} + \norm{w - z} \geq \norm{v - w + w - z} = \norm{v - z} = \rho(v, z)$. \qedhere
	\end{itemize}
\end{proof}
\begin{example}
	$\R^d$ with $\|x\|_p = \begin{cases}
		\displaystyle \left(\sum_{1}^d |x_i|^p\right)^{1 / p} & p \in [1, \infty) \\
		\displaystyle \max_{1 \leq i \leq d} |x_i| & p = \infty
	\end{cases}$ is a normed vector space.
	Unit ball $\{x: \|x\|_p < 1\}$.
\end{example}
All $\|\cdot\|_p$ norm induce the same topology i.e. if $U$ is open in $p$-norm then it is open in $p'$-norm. This implies that a sequence converging under $p$-norm also converges under $p'$-norm.

\fancyem{Recall} $f$ is integrable $\implies \int|f| < \infty$. $f = g $ a.e. $\implies \int f = \int g$.

\begin{definition} 
	Suppose $(X, \cA, \mu)$ a measure space.\\
	$f \in L^1(X, \cA, \mu) = L^1(X, \mu) = L^1(X) = L^1(\mu)$ means $f$ is an integrable function on $X$.
\end{definition}

\begin{lemma}
	$L^1(X, \cA, \mu)$ is a vector space with seminorm $\displaystyle \|f\|_1 = \int |f|$.
\end{lemma}

\begin{definition}
	Define $f \sim g$ if $f = g$ a.e. 
	$L^1(X, \cA, \mu)/_\sim = L^1(X, \cA, \mu)$.
	$``="$ is just a notation for convenience!
\end{definition}

With new definition we have $L^1(X, \cA, \mu)$ is a normed vector space.
$\displaystyle\rho(f, g) = \int |f - g|$.

Something interesting to discuss is what are the dense subsets of $L^1$.
\begin{theorem}\fnl
	\begin{enumerate}
		\item $\{$ integrable simple functions $\}$ is dense in $L^1(X, \cA, \mu)$ (with respect to $L^1$ metric)
		\item $(X, \cA, \mu) = (\R, \cA_\mu, \mu)$, $\mu$ is Lebesgue-Stieltjes measure $\implies$ $\{$ integrable step functions $\}$ is dense in $L^1(X, \cA, \mu)$ 
		\item $C_c(\R)$ is dense in $L^1(\R, \mathcal{L}, m)$.
	\end{enumerate}
\end{theorem}
\begin{definition}\fnl
	\begin{itemize}
		\item A step function on $\R$ is $\psi + \sum_1^N c_i 1_{I_i}$, where $I_i$ is an interval.
		\item $C_c(\R)$ is the collection of continuous functions with compact support $\supp(f) = \overline{\{x \in \R \mid f(x) \neq 0\}}$.
	\end{itemize}
\end{definition}
\begin{proof}
	\begin{enumerate}
		\item $\exists$ simple functions $0 \leq |\phi_1| \leq |\phi_2| \leq \ldots \leq |f|$, $\phi_n \to f$ pointwise $\implies \displaystyle \lim_{n \to \infty} \int |\phi_n - f| = 0$ by DCT. ($|\phi_n - f| \leq |\phi_n| + |f| \leq 2|f|$)
		\item $1_E$ approx by $\sum_1^N c_i1_{I_i}$? Regularity theorem for Lebesgue-Stieltjes measure $\implies \forall \varepsilon' > 0, \exists I = \bigcup_1^N I_i \st \mu(E \triangle I) < \varepsilon'$.
		\item Suppose $1_{(a, b)}$, $g \in C_c(\R)$. $\displaystyle \int |1_{(a, b)} - g|\df m \leq 1 \cdot \frac{\varepsilon}{2} + 1 \cdot \frac{\varepsilon}{2} = \varepsilon$. \qedhere
	\end{enumerate}
\end{proof}

\section{Riemann Integrability} 
Suppose $P = \{a = t_0 < t_1 < \ldots < t_k = b\}$ a partition of $[a, b]$. Lower Riemann sum of $f$ using $P$
\[L_P = \sum_{i = 1}^k \left(\inf_{[t_{i-1}, t_i]} f\right)(t_i - t_{i - 1})\] and upper Riemann sum
\[U_p = \sum_{i = 1}^k \left(\sup_{[t_{i-1}, t_i]} f\right)(t_i - t_{i - 1})\]
Lower Riemann integral of $f = \underline{I} = \sup_P L_P$. Upper Riemann integral of $f = \overline{I} = \inf_P U_P$.

\begin{definition}
	A \emph{bounded} function $f:[a, b] \to \R$ is called Riemann (Darboux) integrable if $\underline{I} = \overline{I}$. (If so, $\underline{I} = \overline{I} = \int_a^b f(x)\df x$.)
\end{definition}
\fancyem{Note} \begin{itemize}
	\item If $P \subset P'$, then $L_P \leq L_{P'}, U_{P'} \leq U_P$.
	\item Recall that continuous functions on $[a, b]$ are Riemann integrable on $[a, b]$.
\end{itemize}

\begin{theorem}
	Let $f: [a, b] \to \R$ be a bounded function.
	\begin{enumerate}
		\item If $f$ is Riemann integrable, then $f$ is Lebesgue measurable. (thus Lebesgue integrable) and $\displaystyle \int_a^b f(x) \df x = \int_{[a, b]}f \df m$.
		\item $f$ is Riemann integrable $\iff f$ is continuous Lebesgue a.e.
	\end{enumerate}
\end{theorem}
\begin{proof}
	$\exists$partitions $P_1 \subset P_2 \subset P_3 \subset \ldots \st L_{P_n} \nearrow \underline{I}, U_{P_n} \searrow \overline{I}$.

	Define simple (step) functions 
	\[\phi_n = \sum_{i=1}^k\left(\inf_{[t_{i - 1}, t_i]}\right)1_{(t_{i-1}, t_i]}\]
	\[\psi_n = \sum_{i=1}^k\left(\sup_{[t_{i - 1}, t_i]}\right)1_{(t_{i-1}, t_i]}\]

	Define $\phi = \sup_n \phi_n$, $\psi = \inf_n \psi_n$. Then $\phi, \psi$ are Lebesgue measurable functions.

	\fancyem{Note} \begin{itemize}
		\item $\exists M > 0 \st |\phi_n|, |\psi_n| \leq M1[a, b], \forall n \in \N$.
		\item $\int \phi_n \df m = L_{P_n}, \int \psi_n \df m = U_{P_n}$.
	\end{itemize}
	By DCT, $\displaystyle \underline{I} = \lim_{n \to \infty} \int \phi_n \df m = \int \phi \df m,  \overline{I} = \int \psi \df m$.

	Thus, $f$ is Riemann integrable $\iff \int \phi = \int \psi \iff \int (\phi - \psi) = 0 \iff \phi = \psi$ Lebesgue a.e.

	Recall that $\phi \leq f \leq \psi, \forall x \in (a, b]$. So $f = \phi$ a.e. Since $(\R, \mathcal{L}, \mu)$ is complete, $f$ is Lebesgue measurable (see HW). The second statement hence follows.
\end{proof}

\section{Modes of Convergence}
Suppose $f_n, f: X \to \C, S \subset X$.
\begin{itemize}
	\item $f_n \to f$ \emph{pointwise} on $S$: $\forall x \in S, \forall \varepsilon > 0, \exists N \in \N \st \forall n \geq \N, |f_n(x) - f(x)| < \varepsilon$.
	\item $f_n \to f$ \emph{uniformly} on $S$: $\forall \varepsilon > 0, \exists N \in \N \st \forall x \in X, \forall n \geq \N, |f_n(x) - f(x)| < \varepsilon$.
\end{itemize}
We can change $\forall \varepsilon > 0$ to $\forall k \in \N$ and bound the distance by $\frac{1}{k}$.

\begin{lemma}\label{le:conv-sets}
	Let $B_{n, k} = \{x \in X \mid |f_n(x) - f(x)| < \frac{1}{k}\}$.
	\begin{enumerate}
		\item $f_n \to f$ pointwise on $\displaystyle S \iff S \subset \bigcap_{k = 1}^\infty \bigcup_{N = 1}^\infty \bigcap_{n = N}^\infty B_{n, k}$.
		\item $f_n \to f$ uniformly on $\displaystyle S \iff \exists N_1, N_2, \ldots \in \N \st S \subset \bigcap_{k = 1}^\infty \bigcap_{n = N_k}^\infty B_{n, k}$.
	\end{enumerate}
\end{lemma}
\begin{definition}
	Suppose $(X, \cA, \mu)$ a measure space.
	\begin{enumerate}
		\item $f_n \to f$ a.e means $\exists$ null set $E \st f_n \to f$ pointwise on $E^c$.
		\item $f_n \to f$ in $L^1$ means $\displaystyle \lim_{n \to \infty} \norm{f_n - f} = 0$.
	\end{enumerate}
\end{definition}

\begin{example} $(\R, \mathcal{L}, \mu)$. $f = 0$.
	\begin{enumerate}
		\item $f_n = 1_{(n, n+1)}, f_n = \frac{1}{n}1_{(0, n)}, f_n = n1_{\left(0, \frac{1}{n}\right)}$. All of $f_n \to f$ pointwise but $\not\to f$ in $L^1$.
		\item Typewriter functions: $f_n \to f$ in $L^1$. $f_n \not\to f$ a.e.
	\end{enumerate}
\end{example}

\begin{proposition}[Fast $L^1$ convergence $\implies$ a.e. convergence]
	Suppose $(x, \cA, \mu)$ measure space. $f_n, f$ measurable function on $X$.
	\[
	\sum_1^\infty \norm{f_n-f}_1 < \infty \implies f_n \to f\ a.e.	
	\]
\end{proposition}
\begin{proof}
	\fancyem{Recall} Markov's inequality.

	Let $\displaystyle E = \bigcup_{k = 1}^\infty\bigcap_{N=1}^\infty \bigcup_{n = N}^\infty B_{n, k}^c = \{x \mid f_n(x) \not\to f(x)\}$. By Markov we have
	\begin{align*}
		& \forall k, \forall N, \mu(B_{n, k}^c) \leq k \int |f_n - f| \\
		\implies & \forall k, \mu\left(\bigcap_{n=N}^\infty B_{n, k}^c\right) \leq \sum_{n = N}^\infty k \norm{f_n - f}_1 \to 0 \text{ as } n \to 0 \\
		\implies & \forall k, \mu\left(\bigcap_{N=1}^\infty\bigcap_{n=N}^\infty B_{n, k}^c\right) = \lim_{N \to \infty} \mu\left(\bigcap_{n=N}^\infty B_{n, k}^c\right) = 0 \\
		\implies & \mu(E) = 0. \qedhere
	\end{align*}
\end{proof}

\begin{corollary}
	$f_n \to f$ in $L^1 \implies \exists$subsequence $f_{n_j} \to f\ a.e$.
\end{corollary}
\begin{proof}
	$\forall j \in \N, \exists n_j \in \N \st \norm{f_{n_j} - f}_1 < \frac{1}{j^2}$. Then $\sum_{j=1}^\infty \norm{f_{n_j} - f}_1 < \infty$.
\end{proof}
\begin{definition}
	$f_n, f$ measurable functions on $(X, \cA, \mu)$. $f_n \to f$ \emph{in measure} means \[\forall \varepsilon > 0, \lim_{n \to \infty}\mu\left(\left\{x \in X \mid |f_n(x) - f(x)| \geq \varepsilon \right\}\right) = 0.\]
\end{definition}
\begin{example}
	\begin{itemize}
		\item $f_n = n1_{\left(0, \frac{1}{n}\right)}, f = 0$.
		\[
			\forall \varepsilon > 0, \left\lbrace x \mid |f_n(x) - f(x)| > \varepsilon\right\rbrace = \left(0, \frac{1}{n}\right).	
		\]
		(Recall that $f_n \not\to 0$ in $L^1$.)

		\item Typewriter function. (Recall that $f_n \not\to 0$ a.e.)
	\end{itemize}
\end{example}

We can easily check that $f_n \to f$ in $L^1 \implies f_n \to f$ in measurable. But the converse is not true.

$f_n \to f$ in measure $\implies \exists f_{n_j} \to f$ a.e. (Check \cite{follandRealAnalysisModern1999})

We have then the following diagram:
\[
	\begin{tikzcd}
	\text{$f_n \to f$ fast $L^1$} 
		\arrow[r, Rightarrow] 
		\arrow[dr, Rightarrow] 
		& \text{$f_n \to f$ in $L^1$} 
			\arrow[r, Rightarrow, shift left=1.5] 
			\arrow[r, "/" marking, Leftarrow, shift right=1.5] 
				& \text{$f_n \to f$ in measure}  \\
		& \text{$f_n \to f$ a.e.}  \arrow[u, "/" marking, Leftarrow, shift left=1.5] \arrow[u, "/" marking, Rightarrow, shift right=1.5] & \text{$\exists f_{n_j} \to f$ a.e.}  \arrow[u, Leftarrow]
	\end{tikzcd}
\]

\begin{definition}
	$f_n, f$ measurable functions on $(X, \cA, \mu)$.
	\begin{enumerate}
		\item $f_n \to f$ \emph{uniformly a.e} means $\exists$ null set $F \st f_n \to f$ uniformly on $F^c$.
		\item $f_n \to f$ \emph{almost uniformly} means $\forall \varepsilon > 0, \exists F \in \cA, \st \mu(F) < \varepsilon, f_n \to f$ uniformly on $F^c$.
	\end{enumerate}
\end{definition}
Recall \ref{le:conv-sets}.

% \epigraph{Still you can massage it and make it work.}{}

\begin{theorem}[Egoroff]
	$f_n, f$ measurable on $(X, \cA, \mu)$. Suppose $\mu(X) < \infty$. Then $f_n \to f$ a.e $\iff f_n \to f$ almost uniformly.
\end{theorem}
\begin{proof}
	"$\impliedby$": DIY
	
	"$\implies$": Fix $\varepsilon > 0$.

	$f_n \to f$ a.e $\implies \displaystyle \mu\left(\bigcup_{k = 1}^\infty \bigcap_{N = 1}^\infty \bigcup_{n = N}^\infty B^c_{n, k}\right) = 0 \implies \forall k, \mu\left(\bigcap_{N = 1}^\infty \bigcup_{n = N}^\infty B^c_{n, k}\right) = 0$.

	By the continuity of measure from above and since $\mu(X) < \infty$, 
	\begin{align*}
		\forall k, \lim_{N \to \infty} \mu\left(\bigcup_{n = N}^\infty B^c_{n, k}\right) = 0 \implies \forall k, \exists N_k \in \N, \mu\left(\bigcup_{n = N_k}^\infty B^c_{n, k}\right) < \frac{\varepsilon}{2^k}.
	\end{align*}
	Let $\displaystyle F = \bigcup_{k = 1}^\infty \bigcup_{n = N_k}^\infty B^c_{n, k} \implies \mu(F) < \varepsilon, f_n \to F$ uniformly on $F^c$.
\end{proof}

\chapter{Product Measures}
(p.22 - 36, section 1.2 and section 2.5, 2.6 of \cite{follandRealAnalysisModern1999}) \\ 
The ultimate goal is to prove Fubini's theorem. This is also related to probability in in the sense that a series of events is in product measure.
\section{Product \ttlmath{\sigma}{sigma}-algebra}
\begin{itemize}
	\item Product space $X = \prod_{\alpha \in I}X_\alpha, x = (x_\alpha)_{\alpha \in I}$.
	\item Coordinate map $\pi_\alpha: X \to X_\alpha$.
\end{itemize}
\begin{definition}
	$(X_\alpha, \cA_\alpha)$ measurable space. $\forall \alpha \in I$, the \emph{product $\sigma$-algebra} on $\displaystyle X = \prod_{\alpha \in I}X_\alpha$ is \[\bigotimes_{\alpha \in I} \cA_\alpha  = \gen{\bigcup_{\alpha \in I}\pi_\alpha^{-1}\left(\cA_\alpha\right)}\]
	where \[
		\pi^{-1}_\alpha\left(A_\alpha\right) = \{\pi^{-1}_\alpha(E) | E \in \cA_\alpha\}.
	\]
\end{definition}
\fancyem{Notation} \[I = \{1, \ldots, d\} \implies X = \prod_{i=1}^d X_i, x = (x_1, \ldots, x_d), \bigotimes_{i=1}^d \cA_i = \cA_1 \otimes \ldots \otimes \cA_d.\]

\begin{lemma}
	If $I$ is countable, then 
	\[
		\bigotimes_{\alpha \in I} \cA_\alpha = \gen{\left\lbrace \prod_{i=1}^\infty E_i \mid E_i \in \cA_i \right\rbrace}
	\]
\end{lemma}

\begin{lemma}
	Suppose $\cA_\alpha = \gen{\cE_\alpha}, \forall \alpha \in I$.
	\begin{enumerate}
		\item $\pi^{-1}_\alpha(\cA_\alpha) = \gen{\pi^{-1}_\alpha(\cE_\alpha)}$.
		\item $\displaystyle \bigotimes_\alpha \cA_\alpha = \gen{\bigcup_\alpha\pi^{-1}_\alpha(\cE_\alpha)}$.
		\item If $I$ is countable, then $\displaystyle \bigotimes_{\alpha \in I} \cA_\alpha = \gen{\left\lbrace \prod_{i=1}^\infty E_i \mid E_i \in \cE_i \right\rbrace}$.
	\end{enumerate}
\end{lemma}
\begin{proof}\fnl
	\begin{enumerate}
		\item  \begin{itemize}
			\item $f: Y \to Z$, $\cB$ a $\sigma$-algebra on $Z \implies f^{-1}(\cB)$ is a $\sigma$-algebra since set union commutes with preimage. Hence $\pi^{-1}_\alpha(\cA_\alpha)$ is a $\sigma$-algebra on $X$. Since $\pi^{-1}_\alpha(\cE_\alpha) \subset \pi^{-1}_\alpha(\cA_\alpha) \implies \gen{\pi^{-1}_\alpha(\cE_\alpha)} \subset \pi^{-1}_\alpha(\cA_\alpha)$.
			\item Let $\cM = \{B \subset X_\alpha \mid \pi^{-1}_\alpha(B) \in \gen{\pi^{-1}_\alpha(\cE_\alpha)}\}$. We show that $\cA_\alpha \subset \cM$. \begin{itemize}
				\item $\cM$ is a $\sigma$-algebra. (easy)
				\item $\cE_\alpha \subset \cM$. (by definition)
			\end{itemize}
			So $\cA_\alpha = \gen{\cE_\alpha} \subset \cM$. Hence, if $E \in \cA_\alpha$, $E \subset \cM \implies \pi^{-1}_\alpha(E) \in \gen{\pi^{-1}_\alpha(\cE_\alpha)}$ i.e. $\cA_\alpha \subset \gen{\pi^{-1}_\alpha(\cE_\alpha)}$.
			\end{itemize}
		\item[(b, c)] DIY. \qedhere
	\end{enumerate}
\end{proof}

\begin{theorem}
	Suppose $X_1, \ldots, X_d$ metric spaces. Let $\displaystyle X = \prod_1^d X_i$ with product metric $\displaystyle \rho(x, y) = \sum_{i=1}^d \rho_i(x, y)$. Then \begin{enumerate}
		\item $\displaystyle \bigotimes_{i=1}^d \cB(X_i) \subset \cB(X)$.
		\item If, in addition, each $X_i$ has a countable dense subset, then $\displaystyle \bigotimes_{i=1}^d \cB(X_i) = \cB(X)$.
	\end{enumerate}
\end{theorem}
\begin{proof}
	DIY.
\end{proof}

As a consequence, we have $\cB(\R^d) = \cB(\R) \otimes \ldots \otimes \cB(\R)$.

Suppose $f = u + iv: X \to \C$. $f$ is measurable $\iff u^{-1}(E) \in \cA, v^{-1}(E) \in \cA, \forall E \in \cB(\R) \iff f^{-1}(F) \in \cA, \forall F \in \cB(\C) = \cB(\R^2) = \cB(\R) \otimes \cB(\R)$. 

p.65.
Let's focus on finite product.

\epigraph{You like Minecraft right? It's all rectangles.}{}

\begin{definition}
	Suppose $X, Y$ sets.
	\begin{enumerate}
		\item For a $E \subset X \times Y$, $E_x = \{y \in Y \mid (x, y) \in E\}$ and $E^y = \{x \in X \mid (x, y) \in E\}$.
		\item For $f: X \times Y \to \C$, define $f_x: Y \to \C, f^y: X \to \C$ by $f_x(y) = f(x, y) = f^y(x)$.
		\item 
	\end{enumerate}
\end{definition}
\begin{example}
	$(1_E)_x = 1_{E_x}$. $(1_E)^y = 1_{E^y}$.
\end{example}

\begin{proposition}
	$(X, \cA), (Y, \cB)$ measurable spaces.
	\begin{enumerate}
		\item $E \in \cA \otimes \cB \implies E_x \in \cB, E^y \in \cA, \forall x \in X, y \in Y$.
		\item $f: X \times Y \to \C$ is $\cA \otimes \cB$-measurable $\implies f_x$ is $\cB$-measurable, $f^y$ is $\cA$-measurable, $\forall x \in X, y \in Y$.
	\end{enumerate}
\end{proposition}
\begin{proof}
	\begin{enumerate}
		\item Let $\mathcal{F} = \{E \subset X \times Y \mid \text{(a) holds}\}$. \begin{itemize}
			\item $\mathcal{F}$ is a $\sigma$-algebra (easy)
			\item $\mathcal{R}_0 \defeq \{A \times B \mid A \in \cA, B \in \cB\} \subset \mathcal{F}$ (easy) $\implies \cA \otimes \cB  = \gen{\mathcal{R}_0} \subset \mathcal{F}$
		\end{itemize}
		\item DIY. \qedhere
	\end{enumerate}
\end{proof}
MIDTERM is up till here.

\section{Product Measures}
\begin{definition}
	Suppose $(X, \cA), (Y, \cB)$. A (measurable) rectangle is $R = A \times B, A \in \cA, b \in \cB$.

	Let $\displaystyle \mathcal{R}_0 \defeq \left\lbrace R = A \times B \mid A \in \cA, B \in \cB \right\rbrace$.\\

	$\displaystyle \mathcal{R} \defeq \left\lbrace \bigcup_1^N R_i \mid N \in \N, R_1, \ldots, R_N \text{ disjoint rectangles} \right\rbrace$.

\end{definition}

\begin{lemma}
	$\mathcal{R}$ is an algebra. $\gen{\mathcal{R}_0} = \gen{\mathcal{R}} = \cA \otimes \cB$.
\end{lemma}

\begin{theorem}
	Suppose $(X, \cA, \mu)$, $(Y, \cB, \nu)$ measure spaces. 
	\begin{enumerate}
		\item $\exists$ measure $\mu \times \nu$ on $\cA \otimes \cB$ satisfying $(\mu \times \nu)(A \otimes B) = \mu(A)\nu(B), \forall A \in \cA, B \in \cB$.
		\item If $\mu, \nu$ are $\sigma$-finite, then $\mu \times \nu$ is unique.
	\end{enumerate}
\end{theorem}
\begin{proof}
	\begin{enumerate}
		\item Define $\pi: \mathcal{R} \to [0, \infty]$ by $\pi(A \times B) = \mu(A)\nu(B)$ and extend linearly.

		\fancyem{Claim} $\pi$ is a pre-measure on $\cR$.
	
		Enough to check $\displaystyle \pi(A \times B) = \sum_1^\infty \pi(A_n \times B_n)$ if $\displaystyle A \times B = \bigcup_{1}^\infty(A_n \times B_n)$ disjoint union.
	
		Since $A_n \times B_n$ are disjoint, \[1_{A \times B}(x, y) = \sum_1^\infty 1_{A_n \times B_n}(x, y),\ 1_A(x)1_B(y) = \sum_1^\infty1_{A_n}(x)1_{B_n}(y).\]
	
		By Tonelli's theorem for series and integrals, we have 
		\begin{multline*}
			\mu(A)1_B(y) = \int_x 1_A(x)1_B(y) \df \mu(x) \\ = \sum_1^\infty \int_x 1_{A_n}(x)1_{B_n}(y) \df \mu(x) = \sum_{1}^\infty \mu(A_n)1_{B_n}(y).
		\end{multline*}
			
		We then integrate with respect to $y$ to complete the claim.
	
		By HK theorem, $\exists \mu \otimes \nu$ on $\gen{\cR} = \cA \otimes \cB$ extending $\pi$ on $\cR$.

		\item $\mu, \nu$ $\sigma$-finite $\implies \pi$ is $\sigma$-finite on $\cR \implies$ HK uniqueness them applies. \qedhere
	\end{enumerate}
\end{proof}

So we have a measure 
\[
	(\mu \times \nu)(E) = \inf \left\lbrace\sum_{1}^\infty \mu(A_u)\nu(B_i) \biggr\rvert E \subset \bigcup_1^\infty A_i \times B_i, A_i \in \cA, B_i \in \cB \right\rbrace.
\]

Then one questions naturally arises: suppose $f: X \times Y \to \C$, \[\int_{X \times Y} f \df(\mu \times v) \stackrel{\text{?}}{=} \int_y \left(\int_x f \df \mu\right) \df \nu.\]

\section{Monotone Class Lemma}
\begin{definition}
	Suppose $X$ is a set, $\mathcal{C} \subset \mathcal{P}(X)$. $\mathcal{C}$ is a \emph{monotone class} on $X$ if 
	\begin{itemize}
		\item closed under \emph{countable increasing unions} \\
		(i.e. $E_n \in \mathcal{C}, E_1 \subset E_2 \subset \ldots \implies \bigcup_1^\infty C_i \in \mathcal{C}$.)
		\item closed under \emph{countable decreasing intersections} \\
		(i.e. $E_n \in \mathcal{C}, E_1 \supset E_2 \supset \ldots \implies \bigcap_1^\infty C_i \in \mathcal{C}$.)
	\end{itemize}
\end{definition}

\begin{example}
	\begin{itemize}
		\item $\sigma$-algebra is a monotone class.
		\item $\displaystyle \bigcap_\alpha \mathcal{C}_\alpha$ is a monotone class $\implies$ if $\mathcal{E} \in \mathcal{P}(X)$, there is unique smallest monotone class containing $\mathcal{E}$.
	\end{itemize}
\end{example}

The importance of this definition shows up in the following theorem:
\begin{theorem}
	Suppose $\mathcal{A}_0$ is an \emph{algebra} on $X$. Then $\gen{\cA_0}$ is the monotone class generated by $\cA_0$.
\end{theorem}

\begin{proof}
	Let $\cA = \gen{\cA_0}$, $\mathcal{C} = $ monotone class generated by $\cA_0$.

	\begin{enumerate}
		\item $\cA$ is a $\sigma$-algebra $\implies \cA$ is a monotone class containing $\cA_0 \implies \cA \supset \mathcal{C}$.
		\item To show that $\mathcal{C} \supset \cA$, we show that $\mathcal{C}$ is a $\sigma$-algebra. \begin{enumerate}
			\item $\emptyset \subset \cA_0 \subset \mathcal{C}$.
			\item Let $\cC' = \{E \subset X \mid E^c \subset \cC\}$. \begin{itemize}
				\item $\cC'$ is a monotone class (easy)
				\item $\cA_0 \subset \cC'$ since $(E \in \cA_0 \implies E^c \in \cA_0 \subset \cC)$.
			\end{itemize}
			These two show that $\cC \subset \cC'$. So $E \in \cC \implies E \in \cC' \implies E^c \in \cC$. So $\cC$ is closed under complements.
			\item For $E \subset X$, let $\mathcal{D}(E) = \{F \in \cC \mid E \cup F \in \cC\}$. \begin{itemize}
				\item $\mathcal{D}(E) \subset \cC$ by definition.
				\item $\mathcal{D}(E)$ is a monotone class (easy). $E \cup \left(\bigcup_1^\infty F_n\right) = \bigcap_1^\infty \left(E \cup F_n\right)$.
				\item  If $E \in \cA_0$, then $\cA_0 \subset \mathcal{D}(E)$. ($F \in \cA_0 \implies E \cup F \in \cA_0 \subset \cC$.)
			\end{itemize}
			These show that $\cC = \mathcal{D}(E)$ if $E \in \cA_0$.
			\item Let $\mathcal{D} = \{E \in \cC \mid \mathcal{D}(E) = \cC\} = \{E \in \cC \mid E \cup F \in \cC, \forall F \in \cC\}$. \begin{itemize}
				\item $\cA_0 \subset \mathcal{D}$ by (3).
				\item $\mathcal{D}$ is a monotone class (easy).
				\item $\mathcal{D} \subset \cC$ by definition.
			\end{itemize}
			So we conclude that $\mathcal{D} = \cC$.
			Now we have $\cC$ is closed under finite unions.
			\item $\cC$ is closed under finite unions and countable increasing unions $\implies \cC$ is closed under countable unions. (check) \qedhere
		\end{enumerate}
	\end{enumerate}
\end{proof}

\fancyem{Recall} $E \in \cA \otimes \cB \implies E_x \in \cB, E^y \in \cA, \forall x \in X, y \in Y$. However, the inverse is not necessarily true.

Now comes the main thing:
\section{Fubini-Tonelli Theorem}
\begin{theorem}[Tonelli for characteristic functions] Suppose $(X, \cA, \mu)$, $(Y \cB, \nu)$ are \emph{$\sigma$-finite} measure spaces. Suppose $E \in \mathcal{A} \otimes \cB$. Then \begin{enumerate}
	\item $\alpha(x) \defeq \nu(E_x): X \to [0, \infty]$ is a $\cA$-measurable function.
	\item $\beta(y) \defeq \mu(E^y): Y \to [0, \infty]$ is a $\cB$-measurable function.
	\item $\displaystyle (\mu \times \nu)(E) = \int_X \nu(E_x)\df \mu(x) = \int_Y \mu\left(E^y\right) \df \nu(y)$.
\end{enumerate}
\end{theorem}
\begin{proof}
	\begin{enumerate}
		\item Assume $\mu, \nu$ are finite measures. Let \[\cC = \left\{E \in \cA \otimes \cB \mid \text{(a), (b), (c) hold}\right\}.\]
		Enough to prove that $\gen{\cR} = \cA \otimes \cB \subset \cC$. 

		Because of monotone class lemma and that $\cR$ is a $\sigma$-algebra, it is enough to show that $\cR \subset \cC$ and $\cC$ is a monotone class.
		\begin{itemize}
			\item Show that $\cR \subset \cC$. \[\alpha(x) = \nu((A \times B)_x) = \begin{cases}
				\nu(B) & x \in A \\ 0 & x \notin A
			\end{cases} = \nu(B)1_A(x).\]
			\begin{multline*}
				(\mu \times \nu)(A \times B) = \mu(A)\nu(B) \\ \iff \int_X \nu((A \times B)_x)\df \mu(x) = \nu(B)\mu(A)
			\end{multline*}

			\item Show that $\cC$ is a monotone class. \begin{enumerate}
				\item Let $E_n \in \cC, E_1 \subset E_2 \subset \ldots$. Need to show that $E = \bigcup_1^\infty E_n \in \cC$. 
				\begin{align*}
					& E_n \in \cC, E_1 \subset E_2 \subset \ldots \\
					\implies & E_x = \bigcup_1^\infty (E_n)_x, (E_1)_x \subset (E_2)_x \subset \ldots \\
					\implies & \alpha(x) = \nu(E_x) = \lim_{n \to \infty} \nu\left((E_n)_x\right), \forall x \in X, \quad \alpha_n(x) \text{ $\cA$-measurable} 
				\end{align*}
				This satisfies (a), (b).
				For (c), we have
				\begin{multline*}
					(\mu \times \nu)(E) = \lim_{n \to \infty}(\mu \times \nu)(E_n) \\
					= \lim_{n \to \infty} \int_X \nu\left((E_n)_x\right) \df \mu(x) \stackrel{MCT}{=} \int_X \nu(E_x) \df \mu(X). 
				\end{multline*}
				So we have shown countable increasing unions.

				\item Let $F_n \in \cC$, $F_1 \supset F_2 \supset \ldots$. Need to show that $F \bigcup_1^\infty F_n \in \cC$. Using continuity of measure from above instead of below, DCT instead of MCT, we obtained a similar result.
			\end{enumerate}
		\end{itemize}
		\item Now assume that $\mu, \nu$ are $\sigma$-finite. Since $X \times Y = \bigcup_1^\infty (X_n \times Y_n)$, where $X_1 \subset X_2 \ldots, Y_1 \subset Y_2 \subset \ldots$ with $\mu(X_k), \nu(Y_k)$ finite. Apply results from then finite case. (DIY) \qedhere
	\end{enumerate}
\end{proof}
\begin{theorem}[Fubini-Tonelli] Suppose $(X, \cA, \mu)$ and $(Y, \cB, \nu)$ are $\sigma$-finite measure spaces. \begin{enumerate}
	\item (Tonelli) If $f: X \times Y \to [0, \infty]$ is $\cA \otimes \cB$-measurable then \begin{enumerate}
		\item $\displaystyle g(x) \defeq \int_Y f(x, y)\df \nu(y): X \to [0, \infty]$ is a $\cA$-measurable function.
		\item $\displaystyle h(y) \defeq \int_X f(x, y)\df \mu(x): Y \to [0, \infty]$ is a $\cB$-measurable function.
		\item We have the iterated integral formula \begin{align*}
			\int_{X \times Y} f \df (\mu \times \nu) 
			& = \int_X \left[\int_Y f(x, y) \df \nu(y)\right] \df \mu(x) \\
			& = \int_X \left[\int_X f(x, y) \df \mu(x)\right] \df \nu(y).
		\end{align*}
	\end{enumerate}
	\item (Fubini) If $f \in L^1(X \times Y, \mu \times \nu)$, then 
	\begin{enumerate}
		\item $f_x \in L^1(Y, \nu)$ for $\mu$-a.e $x$ and $g(x)$ (which is defined $\mu$-a.e) $\in L^1(X, \mu)$.
		\item $f^y \in L^1(X, \mu)$ for $\nu$-a.e $y$ and $h(y)$ (which is defined $\nu$-a.e) $\in L^1(Y, \nu)$.
		\item The iterated integral formula from (a).(3) hold.
	\end{enumerate}
\end{enumerate}
\end{theorem}

Usually we apply Tonelli to $|f|$ to show $f \in L^1(X \times Y, \mu \times \nu)$ and then apply Fubini to evaluate.

\begin{proof}
	See \cite{follandRealAnalysisModern1999}.
\end{proof}

\section{Lebesgue Measure on \ttlmath{\R^d}{R-d}}
\begin{example}[$(\R^2, \cL \otimes \cL, m \times m)$ is not complete]
	Let $A \in \cL, A \neq \emptyset, m(A) = 0$. Let $B \subset [0, 1], B \notin \cL$ (e.g. Vitali set). Then let $E = A \times B, F = A \times [0, 1]$. We can see that $E \subset F$ and $F \in \cL \otimes \cL, (m \times m)(F) = m(A)m([0, 1]) = 0$. 
	
	So $E$ is a subnull set but not $\cL \otimes \cL$-measurable. (otherwise each section of $E$ is measurable, a contradiction.)
\end{example}
\begin{definition}
	Let $(\R^d, \cL^d, m^d)$ be the \emph{completion} of $(\R^d, \cB(\R^d), m \times \ldots \times m)$, which is same(check!) as the \emph{completion} of $(\R^d, \cL \otimes \ldots \otimes \cL, m \times \ldots \times m)$.
\end{definition}
So how do we compute $m^d$?

A \emph{rectangle} in $\R^d$ is $\displaystyle R = \prod_{i=1}^d E_i$, $E_i \in \cB(\R)$. Then 
\[
	m^d(E) = \inf \left\lbrace \sum_1^\infty m^d{R_k}\ \biggr\rvert\ E \subset \bigcup_1^\infty R_k, R_k \text{ rectangle}\right\rbrace.
\]

\begin{theorem}
	Let $E \in \cL^d$.
	\begin{enumerate}
		\item $m^d(E) = \inf\left\lbrace m^d(O) \mid \text{open } O \supset E\right\rbrace = \sup \left\lbrace m^d(K) \mid \text{compact } K \subset E \right\rbrace$.
		\item $E = \underbrace{A_1}_{F\sigma} \cup \underbrace{N_1}_{\text{null}} = \underbrace{A_2}_{G\sigma} \setminus \underbrace{N_2}_{\text{null}}$.
		\item If $m^d(E) < \infty, \forall \varepsilon > 0, \exists R_1, \ldots, R_m$ rectangles whose sides are \emph{intervals} such that $\displaystyle m^d \left(E \triangle \left(\bigcup_1^m R_i\right)\right) < \varepsilon$.
	\end{enumerate}
\end{theorem}
\begin{proof}
	Similar to $d=1$ case.
\end{proof}

\begin{theorem}
	Integrable "step functions" and $C_c(\R^d)$ are dense in $L^1(\R^d, \cL^d, m^d)$.
\end{theorem}
\begin{theorem}
	Lebesgue measure in $\R^d$ is translation-invariant.
\end{theorem}
\begin{theorem}\label{thm:GLonmeasure}
	"Effect of linear transformations on Lebesgue measure"
\end{theorem}
Skip p. 71-81 of \cite{follandRealAnalysisModern1999} except \ref{thm:GLonmeasure}.

\chapter{Differentiation on Euclidean Space}
Suppose $f: [a, b] \to \R$. There are two versions of fundamental theorem of Calculus:
\begin{itemize}
	\item $\displaystyle \int_a^b f'(x) \df x = f(b) - f(a)$.
	\item $\displaystyle \frac{\df}{\df x}\int_a^x f(t)dt = f(x)$.
\end{itemize}
We focus on the second statement, which implies that
\[
	\lim_{r \to 0^+} \frac{1}{r} \int_x^{x + r} f(t) \df t = \lim_{r \to 0^+} \frac{1}{r} \int_{x - r}^x f(t) \df t
\]
Write $\displaystyle f(x) = \frac{1}{r}\int_x^{x + r}f(x) \df t$, then
\[
	\lim_{r \to 0^+} \frac{1}{r} \int_x^{x + r} (f(t) - f(x)) \df t = \lim_{r \to 0^+} \frac{1}{r} \int_{x - r}^x (f(t) - f(x)) \df t.
\]
This generalizes well in $\R^d$:
\[
f: \R^d \to \R, \quad \lim_{r \to 0^+}	\frac{1}{v(B(x, r))} \int_{B(x, r)} f(t) - f(x) \df t = 0.
\]

\fancyem{Question} to what extent does this hold?

Start from \cite[3.4]{follandRealAnalysisModern1999}.
\section{Hardy-Littlewood Maximal Function}
Suppose an open ball in $\R^d, B = B(a, r)$. Denote $cB = B(a, cr), c > 0$.
\begin{lemma}[Vitali-type covering lemma]
	Let $B_1, \ldots, B_k$ be a finite collection of open balls in $R^d$. Then $\exists$ a sub-collection $B'_1, \ldots, B'_m$ of \emph{disjoint} open balls such that
	\[
		\bigcup_1^m(3B'_j) \supset \bigcup_1^k B_i.	
	\]
\end{lemma}
\begin{proof}
	Greedy algorithm.
\end{proof}

\bibliography{analysis}{}
\bibliographystyle{alpha}
\end{document}
